<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="https://geolytix.github.io/xyz/public/icons/favicon.ico">
  <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  <title>Workspace</title>
  <style>

    body {
      margin: 0;
      padding: 0;
    }

    .header-anchor {
      font-size: 80%;
    }

    .grid {
      font-family: system-ui;
      display:grid;
      grid-template-columns: 200px 5fr;
      max-width: 1100px;
      margin: auto;
      padding: 0 30px;
    }

    #toggle {
        display: none;
    }

    #toggle:hover {
      cursor: pointer;
    }

    #nav {
      grid-column: 1;
      padding-inline-start: 0px;
      list-style-type: none;
      padding-right: 20px;
      margin: 3px 0;
      position: fixed;
    }

    #nav > *:first-child {
      line-height: 1;
      font-size: 30px;
      font-weight: bold;
    }

    #content {
      grid-column: 2;
      padding-left: 20px;
      border-left: 1px solid #ddd;
      margin: 10px 0;
      overflow: hidden;
      padding-bottom: 100%;
    }

    #content > *:first-child {
      margin: 0;
    }

    .active {
      font-weight: bold;
    }

    a {
      text-decoration: none;
      white-space: nowrap;
      color: #333;
    }

    h1, h2, h3 {
      margin-bottom: 0.5em;
    }

    p {
      margin-top: 0.5em;
      line-height: 1.5;
    }

    li {
      line-height: 1.5;
    }

    li.__0 {
      padding-left: 0;
    }

    li.__1 {
      padding-left: 0;
    }

    li.__2 {
      padding-left: 0;
    }

    li.__3 {
      padding-left: 20px;
    }

    li.__4 {
      padding-left: 40px;
    }

    pre {
      display: block;
      font-family: monospace;
      white-space: pre;
      margin: 1em 2px;
      padding: 15px;
      box-shadow: 0 0 2px #555;
      overflow-x: auto;
      background-color: #f0f0f0;
    }

    code {
      font-family: monospace;
      background-color: #f0f0f0;
    }

    *:not(pre) > code {
      padding: 5px;
    }

    #content a {
      color: #090;
    }

    #content img {
      max-width: 100%;
      display: block;
      margin: 0 auto;
    }

    @media only screen and (max-width: 700px) {
      .grid {
        grid-template-columns: 0 1fr;
        padding: 0 0 0 40px;
      }

      #toggle {
        display: block;
        position: fixed;
        top: 10px;
        left: 10px;        
        width: 20px;
        height: 30px;
        background: repeating-linear-gradient(#ddd, #fff 10px);
      }

      #nav {
        display: none;
      }

      #content {
        border-left: none;
        padding: 0 20px 0 1px;
        overflow: hidden;
      }
    }

    .show_nav {
      grid-template-columns: 1fr 2fr;
    }

    .show_nav > #nav {
      display: block;
    }

    .show_nav > #content * {
      font-size: 30%;
      padding: 0;
      overflow: hidden;
    }
  </style>

</head>

<body>

  <div class="grid">

    <div id="toggle"></div>

    <ul id="nav">
      
      
      
      <li class="__1 ">
        <a href="/xyz/docs/">XYZ</a>
      </li>
      
      
      
      <li class="__1 ">
        <a href="/xyz/docs/develop/">Develop</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/develop/api/">API</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/develop/api/gazetteer/">Gazetteer</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/develop/api/layer/">Layer</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/develop/api/location/">Location</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/develop/api/provider/">Provider</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/develop/api/proxy/">Proxy</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/develop/api/query/">Query</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/develop/api/user/">User</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/develop/api/view/">View</a>
      </li>
      
      
      
      <li class="__3 active">
        <a href="/xyz/docs/develop/api/workspace/">Workspace</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/develop/design/">Design</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/develop/lib/library/">Library</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/develop/lib/dataviews/">Dataviews</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/develop/lib/layers/">Layers</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/develop/lib/locations/">Locations</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/develop/lib/mapview/">Mapview</a>
      </li>
      
      
      
      <li class="__4 ">
        <a href="/xyz/docs/develop/lib/mapview/interactions/">Interactions</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/develop/lib/plugins/">Plugins</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/develop/lib/webpack/">Webpack</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/develop/security/authentication/">Authentication</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/develop/views/">Application Views</a>
      </li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      

    </ul>

    <div id="content">
      <h1 id="workspace-api">Workspace API <a class="header-anchor" href="#workspace-api">¶</a></h1>
<p>The Workspace API provides methods to retrieve configuration objects and request the chaching of the workspace in other XYZ APIs.</p>
<p>A method must be provided to the Workspace API.</p>
<p>Valid methods are <strong>get</strong> and <strong>cache</strong>.</p>
<p>The Workspace API will redact responses if roles are assigned.</p>
<h3 id="%2Fapi%2Fworkspace%2Fget">/api/workspace/get <a class="header-anchor" href="#%2Fapi%2Fworkspace%2Fget">¶</a></h3>
<p>Will return the complete workspace; All templates and locales.</p>
<pre><code>{
  templates: {...},
  locales: {...}
}
</code></pre>
<h3 id="%2Fapi%2Fworkspace%2Fget%2Flocales">/api/workspace/get/locales <a class="header-anchor" href="#%2Fapi%2Fworkspace%2Fget%2Flocales">¶</a></h3>
<p>Will return an array of all locale keys.</p>
<pre><code>[&quot;uk&quot;,...]
</code></pre>
<h3 id="%2Fapi%2Fworkspace%2Fget%2Flocale%3Flocale%3D%5Bkey%5D">/api/workspace/get/locale?locale=[key] <a class="header-anchor" href="#%2Fapi%2Fworkspace%2Fget%2Flocale%3Flocale%3D%5Bkey%5D">¶</a></h3>
<p>Will return the locale json with layers as an array of layer keys.</p>
<pre><code>{
  &quot;key&quot;: &quot;uk&quot;,
  &quot;bounds&quot;: {
    &quot;north&quot;: 62,
    &quot;east&quot;: 5,
    &quot;south&quot;: 49,
    &quot;west&quot;: -13
  },
  &quot;minZoom&quot;: 2,
  &quot;maxZoom&quot;: 17,
  &quot;showScaleBar&quot;: true,
  &quot;layers&quot;: [
    &quot;OSM&quot;,
    &quot;Stores&quot;
  ]
}
</code></pre>
<h3 id="%2Fapi%2Fworkspace%2Fget%2Flayer%3Flayer%3D%5Bkey%5D%26locale%3D%5Bkey%5D">/api/workspace/get/layer?layer=[key]&amp;locale=[key] <a class="header-anchor" href="#%2Fapi%2Fworkspace%2Fget%2Flayer%3Flayer%3D%5Bkey%5D%26locale%3D%5Bkey%5D">¶</a></h3>
<p>Will return the layer configuration from a layer template. If a locale parameter is provided the layer will be returned with the locale layer configuration assigned to the layer template object.</p>
<pre><code>{
  &quot;display&quot;: true,
  &quot;format&quot;: &quot;tiles&quot;,
  &quot;attribution&quot;: {
    &quot;© OpenStreetMap&quot;: &quot;http://www.openstreetmap.org/copyright&quot;
  },
  &quot;URI&quot;: &quot;https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,
  &quot;key&quot;: &quot;OSM&quot;
}
</code></pre>
<h3 id="%2Fapi%2Fworkspace%2Fget%2Ftemplates">/api/workspace/get/templates <a class="header-anchor" href="#%2Fapi%2Fworkspace%2Fget%2Ftemplates">¶</a></h3>
<p>Will return a list of html links for the individual templates available in the workspace. Links for templates which failed to load from source will be coloured red.</p>
<h3 id="%2Fapi%2Fworkspace%2Fget%2Ftemplate%3Ftemplate%3D%5Bkey%5D">/api/workspace/get/template?template=[key] <a class="header-anchor" href="#%2Fapi%2Fworkspace%2Fget%2Ftemplate%3Ftemplate%3D%5Bkey%5D">¶</a></h3>
<p>Will return the template rendered to string or an error message if the Workspace API failed to load from source.</p>
<h3 id="%2Fapi%2Fworkspace%2Fcache">/api/workspace/cache <a class="header-anchor" href="#%2Fapi%2Fworkspace%2Fcache">¶</a></h3>
<p>The cache method requires admin workspace access. If authenticated, requests will send to the View, Query, Gazetteer, Layer, and Location API with the URL parameter cache as true. Upon receiving the cache request each API will cache the workspace from its source. XYZ will cache the workspace upon invocation if the current memorized workspace is null. It is required to call the cache method of the Workspace API should the workspace change at the source.</p>

    </div>

  </div>

</body>

<script>
    const toggle = document.getElementById('toggle');

    toggle.onclick = e => { e.target.parentElement.classList.toggle('show_nav'); };
</script>

</html>