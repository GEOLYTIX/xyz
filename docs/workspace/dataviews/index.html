<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="https://geolytix.github.io/xyz/public/icons/favicon.ico">
  <title>Dataviews</title>
  <style>

    body {
      margin: 0;
      padding: 0;
    }

    .header-anchor {
      font-size: 80%;
    }

    .grid {
      font-family: system-ui;
      display:grid;
      grid-template-columns: 200px 5fr;
      max-width: 1100px;
      margin: auto;
      padding: 0 30px;
    }

    #toggle {
        display: none;
    }

    #toggle:hover {
      cursor: pointer;
    }

    #nav {
      grid-column: 1;
      padding-inline-start: 0px;
      list-style-type: none;
      padding-right: 20px;
      margin: 3px 0;
      position: fixed;
    }

    #nav > *:first-child {
      line-height: 1;
      font-size: 30px;
      font-weight: bold;
    }

    #content {
      grid-column: 2;
      padding-left: 20px;
      border-left: 1px solid #ddd;
      margin: 10px 0;
      overflow: hidden;
      padding-bottom: 100%;
    }

    #content > *:first-child {
      margin: 0;
    }

    .active {
      font-weight: bold;
    }

    a {
      text-decoration: none;
      white-space: nowrap;
      color: #333;
    }

    h1, h2, h3 {
      margin-bottom: 0.5em;
    }

    p {
      margin-top: 0.5em;
      line-height: 1.5;
    }

    li {
      line-height: 1.5;
    }

    li.__0 {
      padding-left: 0;
    }

    li.__1 {
      padding-left: 0;
    }

    li.__2 {
      padding-left: 0;
    }

    li.__3 {
      padding-left: 20px;
    }

    li.__4 {
      padding-left: 40px;
    }

    pre {
      display: block;
      font-family: monospace;
      white-space: pre;
      margin: 1em 2px;
      padding: 15px;
      box-shadow: 0 0 2px #555;
      overflow-x: auto;
      background-color: #f0f0f0;
    }

    code {
      font-family: monospace;
      background-color: #f0f0f0;
    }

    *:not(pre) > code {
      padding: 5px;
    }

    #content a {
      color: #090;
    }

    #content img {
      max-width: 100%;
      display: block;
      margin: 0 auto;
    }

    @media only screen and (max-width: 700px) {
      .grid {
        grid-template-columns: 0 1fr;
        padding: 0 0 0 40px;
      }

      #toggle {
        display: block;
        position: fixed;
        top: 10px;
        left: 10px;        
        width: 20px;
        height: 30px;
        background: repeating-linear-gradient(#ddd, #fff 10px);
      }

      #nav {
        display: none;
      }

      #content {
        border-left: none;
        padding: 0 20px 0 1px;
        overflow: hidden;
      }
    }

    .show_nav {
      grid-template-columns: 1fr 2fr;
    }

    .show_nav > #nav {
      display: block;
    }

    .show_nav > #content * {
      font-size: 30%;
      padding: 0;
      overflow: hidden;
    }
  </style>

</head>

<body>

  <div class="grid">

    <div id="toggle"></div>

    <ul id="nav">
      
      
      
      <li class="__1 ">
        <a href="/xyz/docs/">XYZ</a>
      </li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <li class="__1 ">
        <a href="/xyz/docs/workspace/workspaces/">Workspace</a>
      </li>
      
      
      
      <li class="__2 active">
        <a href="/xyz/docs/workspace/dataviews/">Dataviews</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/dataviews/charts/">Charts</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/dataviews/tables/">Tables</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/workspace/layer/">Layer</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/layer/cluster/">Cluster</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/layer/editing/">Layer editing</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/layer/geojson/">GeoJson</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/layer/grid/">Hex Grid</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/layer/mvt/">MVT</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/layer/themes/">Themes</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/layer/tile/">Tile Layer</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/workspace/locales/">Locale</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/locales/gazetteer/">Gazetteer</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/locales/plugins/">Plugins</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/workspace/locations/infoj/">Location</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/locations/geometry/">Geometry</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/workspace/roles/">Roles</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/workspace/src/">Source Links</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/workspace/styles/">Styles</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/workspace/templates/">Templates</a>
      </li>
      
      

    </ul>

    <div id="content">
      <h1 id="dataviews">Dataviews <a class="header-anchor" href="#dataviews">¶</a></h1>
<p>Dataviews allow for the representation of a data response from a query as either table or chart.</p>
<p>Dataviews may be assigned to either locations or a layer itself. The location ID will be provided as a query parameter if the dataview is defined for a location in the infoj array.</p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;dataview&quot;,
  &quot;target&quot;: &quot;location&quot;,
  &quot;display&quot;: true,
  &quot;viewport&quot;: true,
  &quot;query&quot;: &quot;shopper towns - population 15 to 21&quot;
}
</code></pre>
<p>The <code>type: &quot;dataview&quot;</code> is required for dataview entries in the infoj schema.</p>
<p>The <code>target</code> defines where the dataview is created. By default, without a target defined, dataviews.create() will generate a div element and assign this element as the dataview target. If called from the layer or location view, the dataview target will be added as a new tab to the tabview. The layer and location view methods for dataviews will attempt to get an element by ID if the target value is a string. A valid ID should be set as the target value if the dataview should be generated in a custom application view. For example on a report template.</p>
<p><code>target: &quot;location&quot;</code> will generate a new target element for the dataview and assign that element to the location view.</p>
<p><code>display: true</code> will define whether the dataview is shown by default. If not set the dataview will be represented as a checkbox in the layer or location view to be displayed if ticked.</p>
<p>The <strong>query</strong> to be used for a dataview must be stored as template. Queries are never sent from the client to the datasource, but a reference for a query template is passed to the Query API with query parameters to be substituted when the query template is rendered.</p>
<p>With <code>viewport: true</code> the current bounds of the mapview will be sent as viewport params with the query.</p>
<p>With <code>center: true</code> the current lat, lng, and z of the mapview will be sent as params with the query.</p>
<h2 id="dataview-arrays">Dataview Arrays <a class="header-anchor" href="#dataview-arrays">¶</a></h2>
<p>Multiple dataviews defined in an array <code>dataviews: []</code> will be created in the same target element. This allows for multiple dataviews to be shown in a single tabview panel. The parent element of the dataviews in the array will be displayed as a grid. The grid column and row of individual dataview elements in the array can therefore be set in the style entry for each dataview.</p>
<h2 id="dataview-class-%26-style">Dataview Class &amp; Style <a class="header-anchor" href="#dataview-class-%26-style">¶</a></h2>
<p>The string value of the class entry in the dataview configuration will be assigned to the dataviews' target element. This allows for the dataview to be styled according to the class definition in the application views' stylesheet. Inline styles can be assigned to the target element by defining the style specification as a string value in the style entry.</p>
<h2 id="toolbars">Toolbars <a class="header-anchor" href="#toolbars">¶</a></h2>
<p>Toolbars are control element to be displayed prior to the dataview element. It is possible to assign control buttons for export or viewport settings to the toolbar.</p>
<p>The <code>viewport: true</code> option in the toolbar entry will create a viewport button in the toolbar which will toggle whether the viewport option is set for the dataview query.</p>

    </div>

  </div>

</body>

<script>
    const toggle = document.getElementById('toggle');

    toggle.onclick = e => { e.target.parentElement.classList.toggle('show_nav'); };
</script>

</html>