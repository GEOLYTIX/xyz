<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="https://geolytix.github.io/xyz/public/icons/favicon.ico">
  <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  <title>Gazetteer</title>
  <style>

    body {
      margin: 0;
      padding: 0;
    }

    .header-anchor {
      font-size: 80%;
    }

    .grid {
      font-family: system-ui;
      display:grid;
      grid-template-columns: 200px 5fr;
      max-width: 1100px;
      margin: auto;
      padding: 0 30px;
    }

    #toggle {
        display: none;
    }

    #toggle:hover {
      cursor: pointer;
    }

    #nav {
      grid-column: 1;
      padding-inline-start: 0px;
      list-style-type: none;
      padding-right: 20px;
      margin: 3px 0;
      position: fixed;
    }

    #nav > *:first-child {
      line-height: 1;
      font-size: 30px;
      font-weight: bold;
    }

    #content {
      grid-column: 2;
      padding-left: 20px;
      border-left: 1px solid #ddd;
      margin: 10px 0;
      overflow: hidden;
      padding-bottom: 100%;
    }

    #content > *:first-child {
      margin: 0;
    }

    .active {
      font-weight: bold;
    }

    a {
      text-decoration: none;
      white-space: nowrap;
      color: #333;
    }

    h1, h2, h3 {
      margin-bottom: 0.5em;
    }

    p {
      margin-top: 0.5em;
      line-height: 1.5;
    }

    li {
      line-height: 1.5;
    }

    li.__0 {
      padding-left: 0;
    }

    li.__1 {
      padding-left: 0;
    }

    li.__2 {
      padding-left: 0;
    }

    li.__3 {
      padding-left: 20px;
    }

    li.__4 {
      padding-left: 40px;
    }

    pre {
      display: block;
      font-family: monospace;
      white-space: pre;
      margin: 1em 2px;
      padding: 15px;
      box-shadow: 0 0 2px #555;
      overflow-x: auto;
      background-color: #f0f0f0;
    }

    code {
      font-family: monospace;
      background-color: #f0f0f0;
    }

    *:not(pre) > code {
      padding: 5px;
    }

    #content a {
      color: #090;
    }

    #content img {
      max-width: 100%;
      display: block;
      margin: 0 auto;
    }

    @media only screen and (max-width: 700px) {
      .grid {
        grid-template-columns: 0 1fr;
        padding: 0 0 0 40px;
      }

      #toggle {
        display: block;
        position: fixed;
        top: 10px;
        left: 10px;        
        width: 20px;
        height: 30px;
        background: repeating-linear-gradient(#ddd, #fff 10px);
      }

      #nav {
        display: none;
      }

      #content {
        border-left: none;
        padding: 0 20px 0 1px;
        overflow: hidden;
      }
    }

    .show_nav {
      grid-template-columns: 1fr 2fr;
    }

    .show_nav > #nav {
      display: block;
    }

    .show_nav > #content * {
      font-size: 30%;
      padding: 0;
      overflow: hidden;
    }
  </style>

</head>

<body>

  <div class="grid">

    <div id="toggle"></div>

    <ul id="nav">
      
      
      
      
      
      <li class="__1 ">
        <a href="/xyz/docs/">XYZ</a>
      </li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/workspace/dataviews/">Dataviews</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/dataviews/charts/">Charts</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/dataviews/tables/">Tables</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/workspace/layer/">Layer</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/layer/cluster/">Cluster</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/layer/editing/">Layer editing</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/layer/geojson/">GeoJson</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/layer/grid/">Hex Grid</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/layer/mvt/">MVT</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/layer/themes/">Themes</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/layer/tile/">Tile Layer</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/workspace/locales/">Locale</a>
      </li>
      
      
      
      <li class="__3 active">
        <a href="/xyz/docs/workspace/locales/gazetteer/">Gazetteer</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/locales/plugins/">Plugins</a>
      </li>
      
      
      
      <li class="__3 ">
        <a href="/xyz/docs/workspace/locations/geometry/">Geometry</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/workspace/locations/infoj/">Location</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/workspace/roles/">Roles</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/workspace/src/">Source Links</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/workspace/styles/">Styles</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/workspace/templates/">Templates</a>
      </li>
      
      
      
      <li class="__1 ">
        <a href="/xyz/docs/workspace/workspaces/">Workspace</a>
      </li>
      
      

    </ul>

    <div id="content">
      <h1 id="gazetteer">Gazetteer <a class="header-anchor" href="#gazetteer">¶</a></h1>
<p>The gazetteer object defines which gazetteer should be used for the current locale.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token string">"gazetteer"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>  <span class="token string">"provider"</span><span class="token operator">:</span> <span class="token string">"MAPBOX"</span><span class="token punctuation">,</span><br>  <span class="token string">"placeholder"</span><span class="token operator">:</span> <span class="token string">"e.g. London"</span><span class="token punctuation">,</span><br>  <span class="token string">"label"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  <span class="token string">"datasets"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token punctuation">{</span><br>      <span class="token string">"layer"</span><span class="token operator">:</span> <span class="token string">"sprawls"</span><span class="token punctuation">,</span><br>      <span class="token string">"table"</span><span class="token operator">:</span> <span class="token string">"glx_cities_of_the_world"</span><span class="token punctuation">,</span><br>      <span class="token string">"qterm"</span><span class="token operator">:</span> <span class="token string">"name"</span><span class="token punctuation">,</span><br>      <span class="token string">"label"</span><span class="token operator">:</span> <span class="token string">"nameascii"</span><span class="token punctuation">,</span><br>      <span class="token string">"leading_wildcard"</span><span class="token operator">:</span> <span class="token boolean">true</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">]</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// "label": true within gazetteer object is optional - it displays result source and is useful in case of searching multiple datasets. </span></code></pre>
<p>Each dataset supports <code>&quot;limit&quot;</code> parameters which defaults to 10. It can be also set within gazetter object in order to apply to all datasets. Results will be sorted alphabetically.</p>
<p>The gazetteer can be set to use either third party provider and / or hosted datasets. Locations from hosted datasets will be selected while geolocations from 3rd party providers are shown as a marker on the map.</p>
<p><code>&quot;provider&quot;: &quot;MAPBOX&quot;</code></p>
<p>The geolocation service to use (MAPBOX, GOOGLE or OPENCAGE). A corresponding KEY_*** is required in the environment settings in order to use a 3rd party service.</p>
<p><code>&quot;placeholder&quot;: &quot;e.g. London&quot;</code></p>
<p>The placeholder to be shown in the gazetteer input.</p>
<p>It is possible to further restrict the results by defining a bounds entry. The bounds value varies with the gazetteer provider used for the query.</p>
<h2 id="google">Google <a class="header-anchor" href="#google">¶</a></h2>
<p><code>&quot;countrycode&quot;: &quot;GB&quot;</code></p>
<p>The country code to limit the search on 3rd party geolocation services. Permitted country codes are <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">ISO 3166-1 alpha-2</a>.</p>
<p><code>&quot;bounds&quot;: &quot;location=51.75,-1.25&amp;radius=4000&quot;</code></p>
<p>Google requires the bounds to be defined as a latitude, longitude coordinate pair and a radius in metres.</p>
<p><code>&quot;components&quot;: &quot;country:GB|country:IE&quot;</code></p>
<p>Google also accepts &quot;components&quot; parameter (see API Docs) which can pass additional information on expected API response.</p>
<p>In the example above results are restricted to United Kingdom and Republic of Ireland.</p>
<h2 id="mapbox">Mapbox <a class="header-anchor" href="#mapbox">¶</a></h2>
<p><code>&quot;bounds&quot;: &quot;bbox=-2,50,4,54&quot;</code></p>
<p><code>&quot;country: &quot;GB&quot;</code></p>
<h2 id="opencage">Opencage <a class="header-anchor" href="#opencage">¶</a></h2>
<p><code>&quot;bounds&quot;: &quot;-13,48,5,62&quot;</code></p>
<p><code>&quot;countrycode&quot;: &quot;GB&quot;</code></p>
<p>Will require a valid Opencage API key provided as KEY_OPENCAGE in the environment settings.</p>
<h2 id="dataset-gazetteer">Dataset gazetteer <a class="header-anchor" href="#dataset-gazetteer">¶</a></h2>
<p>An array of dataset gazetteers which are hit by the autocomplete search first. The 3rd party geolocation service is used once no results are returned from any of the dataset gazetteer entries.</p>
<p><code>&quot;layer&quot;: &quot;sprawls&quot;</code></p>
<p>The layer key in the datasets array object must correspond to a layer defined in the locale's layers.</p>
<p><code>&quot;table&quot;: &quot;glx_cities_of_the_world&quot;</code></p>
<p>The table to be used for the layer. This is required as layers may aggregate data from multiple table.</p>
<p><code>&quot;qterm&quot;: &quot;name&quot;</code></p>
<p>The field to be queried for the search term. Will default to label.</p>
<p><code>&quot;label&quot;: &quot;nameascii&quot;</code></p>
<p>The field which is searched for the autocomplete match. The label is also displayed in the results list.</p>
<p><code>&quot;leading_wildcard&quot;: true</code></p>
<p>The ILIKE query will pre-fix the search term with a wild card. e.g. 'Man' will find 'Central Manchester' as well as 'Manchester Airport'.</p>
<p><code>&quot;space_wildcard&quot;: true</code></p>
<p>If set as true, space_wildcard will break the search term into two.</p>
<p><code>&quot;minLength&quot;: 2</code></p>
<p>The minLength defines the minimum length of the search term before the gazetteer will query connected tables.</p>

    </div>

  </div>

</body>

<script>
    const toggle = document.getElementById('toggle');

    toggle.onclick = e => { e.target.parentElement.classList.toggle('show_nav'); };
</script>

</html>