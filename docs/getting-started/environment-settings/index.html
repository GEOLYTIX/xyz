<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="https://geolytix.github.io/xyz/public/icons/favicon.ico">
  <title>Environment Settings</title>
  <style>

    body {
      margin: 0;
      padding: 0;
    }

    .grid {
      font-family: system-ui;
      display:grid;
      grid-template-columns: 200px 5fr;
      max-width: 1100px;
      margin: auto;
      padding: 0 30px;
    }

    #toggle {
        display: none;
    }

    #toggle:hover {
      cursor: pointer;
    }

    #nav {
      grid-column: 1;
      padding-inline-start: 0px;
      list-style-type: none;
      padding-right: 20px;
      margin: 10px 0;
      position: fixed;
    }

    #nav > *:first-child {
      line-height: 1;
      font-size: 30px;
      font-weight: bold;
    }

    #content {
      grid-column: 2;
      padding-left: 20px;
      border-left: 1px solid #ddd;
      margin: 10px 0;
      overflow: hidden;
    }

    #content > *:first-child {
      margin: 0;
    }

    .active {
      font-weight: bold;
    }

    a {
      text-decoration: none;
      white-space: nowrap;
      color: #333;
    }

    h1, h2, h3 {
      margin-bottom: 0.5em;
    }

    p {
      margin-top: 0.5em;
      line-height: 1.5;
    }

    li {
      line-height: 1.5;
    }

    li.__0 {
      padding-left: 0;
    }

    li.__1 {
      padding-left: 0;
    }

    li.__2 {
      padding-left: 0;
    }

    li.__3 {
      padding-left: 20px;
    }

    li.__4 {
      padding-left: 40px;
    }

    pre {
      display: block;
      font-family: monospace;
      white-space: pre;
      margin: 1em 2px;
      padding: 15px;
      box-shadow: 0 0 2px #555;
      overflow-x: auto;
      background-color: #f0f0f0;
    }

    code {
      font-family: monospace;
      background-color: #f0f0f0;
    }

    *:not(pre) > code {
      padding: 5px;
    }

    #content a {
      color: #090;
    }

    #content img {
      max-width: 100%;
      display: block;
      margin: 0 auto;
    }

    @media only screen and (max-width: 700px) {
      .grid {
        grid-template-columns: 0 1fr;
        padding: 0 0 0 40px;
      }

      #toggle {
        display: block;
        position: fixed;
        top: 10px;
        left: 10px;        
        width: 20px;
        height: 30px;
        background: repeating-linear-gradient(#ddd, #fff 10px);
      }

      #nav {
        display: none;
      }

      #content {
        border-left: none;
        padding: 0 20px 0 1px;
        overflow: hidden;
      }
    }

    .show_nav {
      grid-template-columns: 1fr 2fr;
    }

    .show_nav > #nav {
      display: block;
    }

    .show_nav > #content * {
      font-size: 30%;
      padding: 0;
      overflow: hidden;
    }
  </style>

</head>

<body>

  <div class="grid">

    <div id="toggle"></div>

    <ul id="nav">
      
      
      
      <li class="__1 ">
        <a href="/xyz/docs/">XYZ</a>
      </li>
      
      
      
      <li class="__1 ">
        <a href="/xyz/docs/getting-started/">Getting started</a>
      </li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/getting-started/access/">Access</a>
      </li>
      
      
      
      <li class="__2 ">
        <a href="/xyz/docs/getting-started/deploy/">Deployments</a>
      </li>
      
      
      
      <li class="__2 active">
        <a href="/xyz/docs/getting-started/environment-settings/">Environment Settings</a>
      </li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      

    </ul>

    <div id="content">
      <h1>Environment settings</h1>
<p>The process environment contains sensitive information such as connection strings for data sources, security information and API keys. These should never be made public and are not contained in this repository.</p>
<p>Running the application without any environment settings (zero-configuration) will host a sample application with a single OSM base layer on port 3000.</p>
<p><code>PORT: &quot;3000&quot;</code></p>
<p>By default the express.js script will listen for requests on port 3000. The PORT environment entry may override the listening port.</p>
<p><code>TITLE: &quot;GEOLYTIX | XYZ&quot;</code></p>
<p>The title will passed as <code>&lt;title&gt;</code> tag to the default application views. The title value will also be used as cookie-name in the set-cookie header.</p>
<p><code>DIR: &quot;/open&quot;</code></p>
<p>The path for the application root. This allows to host multiple deployments with different DIR on the same domain.</p>
<h2>Workspace</h2>
<p><code>WORKSPACE: &quot;file:dev.json&quot;</code></p>
<p>With the <code>file:</code> prefix the server will look for a workspace document in the public/workspaces directory.</p>
<p>The workspace may be retrieved from a CDN if the url responds with a valid JSON response.</p>
<p><code>WORKSPACE: &quot;https://cdn.jsdelivr.net/gh/GEOLYTIX/xyz/public/workspaces/dev.json&quot;</code></p>
<p>It is recommended to store workspaces on Github. Workspaces must not contain sensitive information and maybe be stored in public repositories. If stored in a private repository a valid <code>KEY_GITHUB</code> must be provided.</p>
<p><code>WORKSPACE: &quot;github://api.github.com/repos/GEOLYTIX/xyz/contents/public/workspaces/dev.json&quot;</code></p>
<h2>PostGIS Database Connections</h2>
<p>Connection strings must be provided for all data sources which are referenced in a workspace.</p>
<p><code>&quot;DBS_XYZ&quot;: &quot;postgres://username:password@123.123.123.123:5432/database&quot;</code></p>
<p>Keys beginning with DBS_ store PostGIS data source connections. The remainder of the <code>&quot;DBS_***&quot;</code> string is the key for the database connection. This key must be referenced as the dbs parameter for all queries to the data source layer.</p>
<p>Each query which is passed via node-postgres to the data source layer will timeout after 10 seconds. It is possible to overwrite the default timeout by setting the <code>STATEMENT_TIMEOUT</code> key in the environment settings.</p>
<p><code>STATEMENT_TIMEOUT: 10000</code></p>
<h2>API Keys</h2>
<p>Keys for 3rd party service provider must be in the environment settings for the XYZ host to access and proxy these services. A request proxied through the XYZ domain layer will not expose the keys used to the client.</p>
<p><code>&quot;KEY_GOOGLE&quot;: &quot;key=***&quot;</code></p>
<p>A <a href="https://developers.google.com/maps/documentation/javascript/get-api-key">Google Maps API key</a> required for the Google Maps API.</p>
<p><code>&quot;KEY_MAPBOX&quot;: &quot;access_token=pk.***&quot;</code></p>
<p>A <a href="https://www.mapbox.com/help/how-access-tokens-work">Mapbox access token</a> required for base maps and services requested from the Mapbox API.</p>
<p><code>&quot;KEY_HERE&quot;: &quot;app_id=***&amp;app_code=***&quot;</code></p>
<p>A <a href="https://developer.here.com">HERE API</a> key required for base maps and services requested from the HERE Maps API.</p>
<p><code>&quot;KEY_OS&quot;: &quot;***&quot;</code></p>
<p>An Ordnance Survey API key. The key is required for access to services such as the <a href="https://www.ordnancesurvey.co.uk/business-government/tools-support/open-zoomstack-support">OS Zoomstack</a> mapping layers.</p>
<p><code>&quot;CLOUDINARY&quot;: &quot;api_key api_secret cloud_name folder&quot;</code></p>
<p>A <a href="https://cloudinary.com/">Cloudinary</a> key, secret and folder for images to be stored.</p>
<p><code>&quot;KEY_OPENCAGE&quot;: &quot;***&quot;</code></p>
<p>API key required to access the <a href="https://opencagedata.com/api">Opencage geocoding service</a>.</p>

    </div>

  </div>

</body>

<script>
    const toggle = document.getElementById('toggle');

    toggle.onclick = e => { e.target.parentElement.classList.toggle('show_nav'); };
</script>

</html>