{
  "version": 3,
  "sources": ["../../../node_modules/@webreflection/mapset/esm/index.js", "../../../node_modules/@webreflection/uparser/esm/index.js", "../../../node_modules/@webreflection/uwire/esm/index.js", "../../../node_modules/uarray/esm/index.js", "../../../node_modules/uhandlers/esm/index.js", "../../../node_modules/udomdiff/esm/index.js", "../../../node_modules/uhtml/esm/utils.js", "../../../node_modules/uhtml/esm/handlers.js", "../../../node_modules/uhtml/esm/rabbit.js", "../../../node_modules/uhtml/esm/index.js", "../../../lib/utils/clone.mjs", "../../../lib/utils/convert.mjs", "../../../lib/utils/copyToClipboard.mjs", "../../../lib/utils/dataURLtoBlob.mjs", "../../../lib/utils/here.mjs", "../../../lib/utils/hexa.mjs", "../../../lib/utils/loadPlugins.mjs", "../../../lib/utils/mapboxGeometryFunction.mjs", "../../../lib/utils/getCurrentPosition.mjs", "../../../lib/utils/merge.mjs", "../../../lib/utils/paramString.mjs", "../../../lib/utils/promiseAll.mjs", "../../../lib/utils/queryParams.mjs", "../../../lib/utils/style.mjs", "../../../lib/utils/svgSymbols.mjs", "../../../lib/utils/verticeGeoms.mjs", "../../../lib/utils/xhr.mjs", "../../../lib/utils/_utils.mjs", "../../../lib/hooks.mjs", "../../../lib/dictionaries/en.mjs", "../../../lib/dictionaries/de.mjs", "../../../lib/dictionaries/fr.mjs", "../../../lib/dictionaries/pl.mjs", "../../../lib/dictionaries/ja.mjs", "../../../lib/dictionaries/ko.mjs", "../../../lib/dictionaries/cn.mjs", "../../../lib/dictionaries/_dictionaries.mjs", "../../../lib/layer/format/mbtiles.mjs", "../../../lib/layer/format/mapboxgl.mjs", "../../../lib/layer/format/tiles.mjs", "../../../lib/layer/format/mvt.mjs", "../../../lib/layer/format/cluster.mjs", "../../../lib/layer/format/geojson.mjs", "../../../lib/layer/format/grid.mjs", "../../../lib/layer/format/googlemaps.mjs", "../../../lib/layer/format/_format.mjs", "../../../lib/layer/decorate.mjs", "../../../lib/layer/hover.mjs", "../../../lib/layer/Style.mjs", "../../../lib/layer/themes/categorized.mjs", "../../../lib/layer/themes/distributed.mjs", "../../../lib/layer/themes/graduated.mjs", "../../../lib/layer/_layer.mjs", "../../../lib/location/decorate.mjs", "../../../lib/location/get.mjs", "../../../lib/location/nnearest.mjs", "../../../lib/location/_location.mjs", "../../../lib/mapview/addLayer.mjs", "../../../lib/mapview/fitView.mjs", "../../../lib/mapview/getBounds.mjs", "../../../lib/mapview/geoJSON.mjs", "../../../lib/mapview/infotip.mjs", "../../../lib/mapview/locate.mjs", "../../../lib/mapview/popup.mjs", "../../../lib/mapview/snapSource.mjs", "../../../lib/mapview/interactions/highlight.mjs", "../../../lib/mapview/interactions/draw.mjs", "../../../lib/mapview/interactions/modify.mjs", "../../../lib/mapview/interactions/zoom.mjs", "../../../lib/mapview/_mapview.mjs", "../../../lib/mapp.mjs"],
  "sourcesContent": ["export class MapSet extends Map {\n  set(key, value) {\n    super.set(key, value);\n    return value;\n  }\n}\n\nexport class WeakMapSet extends WeakMap {\n  set(key, value) {\n    super.set(key, value);\n    return value;\n  }\n}\n", "/*! (c) Andrea Giammarchi - ISC */\nconst empty = /^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;\nconst elements = /<([a-z]+[a-z0-9:._-]*)([^>]*?)(\\/?)>/g;\nconst attributes = /([^\\s\\\\>\"'=]+)\\s*=\\s*(['\"]?)\\x01/g;\nconst holes = /[\\x01\\x02]/g;\n\n// \\x01 Node.ELEMENT_NODE\n// \\x02 Node.ATTRIBUTE_NODE\n\n/**\n * Given a template, find holes as both nodes and attributes and\n * return a string with holes as either comment nodes or named attributes.\n * @param {string[]} template a template literal tag array\n * @param {string} prefix prefix to use per each comment/attribute\n * @param {boolean} svg enforces self-closing tags\n * @returns {string} X/HTML with prefixed comments or attributes\n */\nexport default (template, prefix, svg) => {\n  let i = 0;\n  return template\n          .join('\\x01')\n          .trim()\n          .replace(\n            elements,\n            (_, name, attrs, selfClosing) => {\n              let ml = name + attrs.replace(attributes, '\\x02=$2$1').trimEnd();\n              if (selfClosing.length)\n                ml += (svg || empty.test(name)) ? ' /' : ('></' + name);\n              return '<' + ml + '>';\n            }\n          )\n          .replace(\n            holes,\n            hole => hole === '\\x01' ?\n              ('<!--' + prefix + i++ + '-->') :\n              (prefix + i++)\n          );\n};\n", "const ELEMENT_NODE = 1;\nconst nodeType = 111;\n\nconst remove = ({firstChild, lastChild}) => {\n  const range = document.createRange();\n  range.setStartAfter(firstChild);\n  range.setEndAfter(lastChild);\n  range.deleteContents();\n  return firstChild;\n};\n\nexport const diffable = (node, operation) => node.nodeType === nodeType ?\n  ((1 / operation) < 0 ?\n    (operation ? remove(node) : node.lastChild) :\n    (operation ? node.valueOf() : node.firstChild)) :\n  node\n;\n\nexport const persistent = fragment => {\n  const {firstChild, lastChild} = fragment;\n  if (firstChild === lastChild)\n    return lastChild || fragment;\n  const {childNodes} = fragment;\n  const nodes = [...childNodes];\n  return {\n    ELEMENT_NODE,\n    nodeType,\n    firstChild,\n    lastChild,\n    valueOf() {\n      if (childNodes.length !== nodes.length)\n        fragment.append(...nodes);\n      return fragment;\n    }\n  };\n};\n", "const {isArray} = Array;\nconst {indexOf, slice} = [];\n\nexport {isArray, indexOf, slice};\n", "import {isArray} from 'uarray';\n\n// flag for foreign checks (slower path, fast by default)\nlet useForeign = false;\n\nexport class Foreign {\n  constructor(handler, value) {\n    useForeign = true;\n    this._ = (...args) => handler(...args, value);\n  }\n}\n\nexport const foreign = (handler, value) => new Foreign(handler, value);\n\nexport const aria = node => values => {\n  for (const key in values) {\n    const name = key === 'role' ? key : `aria-${key}`;\n    const value = values[key];\n    if (value == null)\n      node.removeAttribute(name);\n    else\n      node.setAttribute(name, value);\n  }\n};\n\nexport const attribute = (node, name) => {\n  let oldValue, orphan = true;\n  const attributeNode = document.createAttributeNS(null, name);\n  return newValue => {\n    if (oldValue !== newValue) {\n      oldValue = newValue;\n      if (oldValue == null) {\n        if (!orphan) {\n          node.removeAttributeNode(attributeNode);\n          orphan = true;\n        }\n      }\n      else {\n        const value = useForeign && (newValue instanceof Foreign) ?\n                        newValue._(node, name) : newValue;\n        if (value == null) {\n          if (!orphan)\n            node.removeAttributeNode(attributeNode);\n            orphan = true;\n        }\n        else {\n          attributeNode.value = value;\n          if (orphan) {\n            node.setAttributeNodeNS(attributeNode);\n            orphan = false;\n          }\n        }\n      }\n    }\n  };\n};\n\nexport const boolean = (node, key, oldValue) => newValue => {\n  if (oldValue !== !!newValue) {\n    // when IE won't be around anymore ...\n    // node.toggleAttribute(key, oldValue = !!newValue);\n    if ((oldValue = !!newValue))\n      node.setAttribute(key, '');\n    else\n      node.removeAttribute(key);\n  }\n};\n\nexport const data = ({dataset}) => values => {\n  for (const key in values) {\n    const value = values[key];\n    if (value == null)\n      delete dataset[key];\n    else\n      dataset[key] = value;\n  }\n};\n\nexport const event = (node, name) => {\n  let oldValue, lower, type = name.slice(2);\n  if (!(name in node) && (lower = name.toLowerCase()) in node)\n    type = lower.slice(2);\n  return newValue => {\n    const info = isArray(newValue) ? newValue : [newValue, false];\n    if (oldValue !== info[0]) {\n      if (oldValue)\n        node.removeEventListener(type, oldValue, info[1]);\n      if (oldValue = info[0])\n        node.addEventListener(type, oldValue, info[1]);\n    }\n  };\n};\n\nexport const ref = node => {\n  let oldValue;\n  return value => {\n    if (oldValue !== value) {\n      oldValue = value;\n      if (typeof value === 'function')\n        value(node);\n      else\n        value.current = node;\n    }\n  };\n};\n\nexport const setter = (node, key) => key === 'dataset' ?\n  data(node) :\n  value => {\n    node[key] = value;\n  };\n\nexport const text = node => {\n  let oldValue;\n  return newValue => {\n    if (oldValue != newValue) {\n      oldValue = newValue;\n      node.textContent = newValue == null ? '' : newValue;\n    }\n  };\n};\n", "/**\n * ISC License\n *\n * Copyright (c) 2020, Andrea Giammarchi, @WebReflection\n *\n * Permission to use, copy, modify, and/or distribute this software for any\n * purpose with or without fee is hereby granted, provided that the above\n * copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n * REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n * AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n * INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n * LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE\n * OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n * PERFORMANCE OF THIS SOFTWARE.\n */\n\n/**\n * @param {Node} parentNode The container where children live\n * @param {Node[]} a The list of current/live children\n * @param {Node[]} b The list of future children\n * @param {(entry: Node, action: number) => Node} get\n * The callback invoked per each entry related DOM operation.\n * @param {Node} [before] The optional node used as anchor to insert before.\n * @returns {Node[]} The same list of future children.\n */\nexport default (parentNode, a, b, get, before) => {\n  const bLength = b.length;\n  let aEnd = a.length;\n  let bEnd = bLength;\n  let aStart = 0;\n  let bStart = 0;\n  let map = null;\n  while (aStart < aEnd || bStart < bEnd) {\n    // append head, tail, or nodes in between: fast path\n    if (aEnd === aStart) {\n      // we could be in a situation where the rest of nodes that\n      // need to be added are not at the end, and in such case\n      // the node to `insertBefore`, if the index is more than 0\n      // must be retrieved, otherwise it's gonna be the first item.\n      const node = bEnd < bLength ?\n        (bStart ?\n          (get(b[bStart - 1], -0).nextSibling) :\n          get(b[bEnd - bStart], 0)) :\n        before;\n      while (bStart < bEnd)\n        parentNode.insertBefore(get(b[bStart++], 1), node);\n    }\n    // remove head or tail: fast path\n    else if (bEnd === bStart) {\n      while (aStart < aEnd) {\n        // remove the node only if it's unknown or not live\n        if (!map || !map.has(a[aStart]))\n          parentNode.removeChild(get(a[aStart], -1));\n        aStart++;\n      }\n    }\n    // same node: fast path\n    else if (a[aStart] === b[bStart]) {\n      aStart++;\n      bStart++;\n    }\n    // same tail: fast path\n    else if (a[aEnd - 1] === b[bEnd - 1]) {\n      aEnd--;\n      bEnd--;\n    }\n    // The once here single last swap \"fast path\" has been removed in v1.1.0\n    // https://github.com/WebReflection/udomdiff/blob/single-final-swap/esm/index.js#L69-L85\n    // reverse swap: also fast path\n    else if (\n      a[aStart] === b[bEnd - 1] &&\n      b[bStart] === a[aEnd - 1]\n    ) {\n      // this is a \"shrink\" operation that could happen in these cases:\n      // [1, 2, 3, 4, 5]\n      // [1, 4, 3, 2, 5]\n      // or asymmetric too\n      // [1, 2, 3, 4, 5]\n      // [1, 2, 3, 5, 6, 4]\n      const node = get(a[--aEnd], -1).nextSibling;\n      parentNode.insertBefore(\n        get(b[bStart++], 1),\n        get(a[aStart++], -1).nextSibling\n      );\n      parentNode.insertBefore(get(b[--bEnd], 1), node);\n      // mark the future index as identical (yeah, it's dirty, but cheap \uD83D\uDC4D)\n      // The main reason to do this, is that when a[aEnd] will be reached,\n      // the loop will likely be on the fast path, as identical to b[bEnd].\n      // In the best case scenario, the next loop will skip the tail,\n      // but in the worst one, this node will be considered as already\n      // processed, bailing out pretty quickly from the map index check\n      a[aEnd] = b[bEnd];\n    }\n    // map based fallback, \"slow\" path\n    else {\n      // the map requires an O(bEnd - bStart) operation once\n      // to store all future nodes indexes for later purposes.\n      // In the worst case scenario, this is a full O(N) cost,\n      // and such scenario happens at least when all nodes are different,\n      // but also if both first and last items of the lists are different\n      if (!map) {\n        map = new Map;\n        let i = bStart;\n        while (i < bEnd)\n          map.set(b[i], i++);\n      }\n      // if it's a future node, hence it needs some handling\n      if (map.has(a[aStart])) {\n        // grab the index of such node, 'cause it might have been processed\n        const index = map.get(a[aStart]);\n        // if it's not already processed, look on demand for the next LCS\n        if (bStart < index && index < bEnd) {\n          let i = aStart;\n          // counts the amount of nodes that are the same in the future\n          let sequence = 1;\n          while (++i < aEnd && i < bEnd && map.get(a[i]) === (index + sequence))\n            sequence++;\n          // effort decision here: if the sequence is longer than replaces\n          // needed to reach such sequence, which would brings again this loop\n          // to the fast path, prepend the difference before a sequence,\n          // and move only the future list index forward, so that aStart\n          // and bStart will be aligned again, hence on the fast path.\n          // An example considering aStart and bStart are both 0:\n          // a: [1, 2, 3, 4]\n          // b: [7, 1, 2, 3, 6]\n          // this would place 7 before 1 and, from that time on, 1, 2, and 3\n          // will be processed at zero cost\n          if (sequence > (index - bStart)) {\n            const node = get(a[aStart], 0);\n            while (bStart < index)\n              parentNode.insertBefore(get(b[bStart++], 1), node);\n          }\n          // if the effort wasn't good enough, fallback to a replace,\n          // moving both source and target indexes forward, hoping that some\n          // similar node will be found later on, to go back to the fast path\n          else {\n            parentNode.replaceChild(\n              get(b[bStart++], 1),\n              get(a[aStart++], -1)\n            );\n          }\n        }\n        // otherwise move the source forward, 'cause there's nothing to do\n        else\n          aStart++;\n      }\n      // this node has no meaning in the future list, so it's more than safe\n      // to remove it, and check the next live node out instead, meaning\n      // that only the live list index should be forwarded\n      else\n        parentNode.removeChild(get(a[aStart++], -1));\n    }\n  }\n  return b;\n};\n", "const {isArray, prototype} = Array;\nconst {indexOf} = prototype;\n\nexport {isArray, indexOf};\n\nconst {\n  createDocumentFragment,\n  createElement,\n  createElementNS,\n  createTextNode,\n  createTreeWalker,\n  importNode\n} = new Proxy(document, {\n  get: (target, method) => target[method].bind(target)\n});\n\nexport {createTextNode, createTreeWalker, importNode};\n\nconst createHTML = html => {\n  const template = createElement('template');\n  template.innerHTML = html;\n  return template.content;\n};\n\nlet xml;\nconst createSVG = svg => {\n  if (!xml) xml = createElementNS('http://www.w3.org/2000/svg', 'svg');\n  xml.innerHTML = svg;\n  const content = createDocumentFragment();\n  content.append(...xml.childNodes);\n  return content;\n};\n\nexport const createContent = (text, svg) => svg ?\n                              createSVG(text) : createHTML(text);\n", "import {diffable} from '@webreflection/uwire';\n\nimport {aria, attribute, boolean, event, ref, setter, text} from 'uhandlers';\nimport udomdiff from 'udomdiff';\n\nimport {isArray, createTextNode} from './utils.js';\n\n// from a generic path, retrieves the exact targeted node\nconst reducePath = ({childNodes}, i) => childNodes[i];\n\n// this helper avoid code bloat around handleAnything() callback\nconst diff = (comment, oldNodes, newNodes) => udomdiff(\n  comment.parentNode,\n  // TODO: there is a possible edge case where a node has been\n  //       removed manually, or it was a keyed one, attached\n  //       to a shared reference between renders.\n  //       In this case udomdiff might fail at removing such node\n  //       as its parent won't be the expected one.\n  //       The best way to avoid this issue is to filter oldNodes\n  //       in search of those not live, or not in the current parent\n  //       anymore, but this would require both a change to uwire,\n  //       exposing a parentNode from the firstChild, as example,\n  //       but also a filter per each diff that should exclude nodes\n  //       that are not in there, penalizing performance quite a lot.\n  //       As this has been also a potential issue with domdiff,\n  //       and both lighterhtml and hyperHTML might fail with this\n  //       very specific edge case, I might as well document this possible\n  //       \"diffing shenanigan\" and call it a day.\n  oldNodes,\n  newNodes,\n  diffable,\n  comment\n);\n\n// if an interpolation represents a comment, the whole\n// diffing will be related to such comment.\n// This helper is in charge of understanding how the new\n// content for such interpolation/hole should be updated\nconst handleAnything = comment => {\n  let oldValue, text, nodes = [];\n  const anyContent = newValue => {\n    switch (typeof newValue) {\n      // primitives are handled as text content\n      case 'string':\n      case 'number':\n      case 'boolean':\n        if (oldValue !== newValue) {\n          oldValue = newValue;\n          if (!text)\n            text = createTextNode('');\n          text.data = newValue;\n          nodes = diff(comment, nodes, [text]);\n        }\n        break;\n      // null, and undefined are used to cleanup previous content\n      case 'object':\n      case 'undefined':\n        if (newValue == null) {\n          if (oldValue != newValue) {\n            oldValue = newValue;\n            nodes = diff(comment, nodes, []);\n          }\n          break;\n        }\n        // arrays and nodes have a special treatment\n        if (isArray(newValue)) {\n          oldValue = newValue;\n          // arrays can be used to cleanup, if empty\n          if (newValue.length === 0)\n            nodes = diff(comment, nodes, []);\n          // or diffed, if these contains nodes or \"wires\"\n          else if (typeof newValue[0] === 'object')\n            nodes = diff(comment, nodes, newValue);\n          // in all other cases the content is stringified as is\n          else\n            anyContent(String(newValue));\n          break;\n        }\n        // if the new value is a DOM node, or a wire, and it's\n        // different from the one already live, then it's diffed.\n        // if the node is a fragment, it's appended once via its childNodes\n        // There is no `else` here, meaning if the content\n        // is not expected one, nothing happens, as easy as that.\n        if (oldValue !== newValue && 'ELEMENT_NODE' in newValue) {\n          oldValue = newValue;\n          nodes = diff(\n            comment,\n            nodes,\n            newValue.nodeType === 11 ?\n              [...newValue.childNodes] :\n              [newValue]\n          );\n        }\n        break;\n      case 'function':\n        anyContent(newValue(comment));\n        break;\n    }\n  };\n  return anyContent;\n};\n\n// attributes can be:\n//  * ref=${...}      for hooks and other purposes\n//  * aria=${...}     for aria attributes\n//  * ?boolean=${...} for boolean attributes\n//  * .dataset=${...} for dataset related attributes\n//  * .setter=${...}  for Custom Elements setters or nodes with setters\n//                    such as buttons, details, options, select, etc\n//  * @event=${...}   to explicitly handle event listeners\n//  * onevent=${...}  to automatically handle event listeners\n//  * generic=${...}  to handle an attribute just like an attribute\nconst handleAttribute = (node, name/*, svg*/) => {\n  switch (name[0]) {\n    case '?': return boolean(node, name.slice(1), false);\n    case '.': return setter(node, name.slice(1));\n    case '@': return event(node, 'on' + name.slice(1));\n    case 'o': if (name[1] === 'n') return event(node, name);\n  }\n\n  switch (name) {\n    case 'ref': return ref(node);\n    case 'aria': return aria(node);\n  }\n\n  return attribute(node, name/*, svg*/);\n};\n\n// each mapped update carries the update type and its path\n// the type is either node, attribute, or text, while\n// the path is how to retrieve the related node to update.\n// In the attribute case, the attribute name is also carried along.\nexport function handlers(options) {\n  const {type, path} = options;\n  const node = path.reduceRight(reducePath, this);\n  return type === 'node' ?\n    handleAnything(node) :\n    (type === 'attr' ?\n      handleAttribute(node, options.name/*, options.svg*/) :\n      text(node));\n};\n", "import {WeakMapSet} from '@webreflection/mapset';\nimport instrument from '@webreflection/uparser';\nimport {persistent} from '@webreflection/uwire';\n\nimport {handlers} from './handlers.js';\nimport {isArray, indexOf, createContent, createTreeWalker, importNode} from './utils.js';\n\n// from a fragment container, create an array of indexes\n// related to its child nodes, so that it's possible\n// to retrieve later on exact node via reducePath\nconst createPath = node => {\n  const path = [];\n  let {parentNode} = node;\n  while (parentNode) {\n    path.push(indexOf.call(parentNode.childNodes, node));\n    node = parentNode;\n    ({parentNode} = node);\n  }\n  return path;\n};\n\n// the prefix is used to identify either comments, attributes, or nodes\n// that contain the related unique id. In the attribute cases\n// is\u00B5X=\"attribute-name\" will be used to map current X update to that\n// attribute name, while comments will be like <!--is\u00B5X-->, to map\n// the update to that specific comment node, hence its parent.\n// style and textarea will have <!--is\u00B5X--> text content, and are handled\n// directly through text-only updates.\nconst prefix = 'is\u00B5';\n\n// Template Literals are unique per scope and static, meaning a template\n// should be parsed once, and once only, as it will always represent the same\n// content, within the exact same amount of updates each time.\n// This cache relates each template to its unique content and updates.\nconst cache = new WeakMapSet;\n\n// a RegExp that helps checking nodes that cannot contain comments\nconst textOnly = /^(?:textarea|script|style|title|plaintext|xmp)$/;\n\nexport const createCache = () => ({\n  stack: [],    // each template gets a stack for each interpolation \"hole\"\n\n  entry: null,  // each entry contains details, such as:\n                //  * the template that is representing\n                //  * the type of node it represents (html or svg)\n                //  * the content fragment with all nodes\n                //  * the list of updates per each node (template holes)\n                //  * the \"wired\" node or fragment that will get updates\n                // if the template or type are different from the previous one\n                // the entry gets re-created each time\n\n  wire: null    // each rendered node represent some wired content and\n                // this reference to the latest one. If different, the node\n                // will be cleaned up and the new \"wire\" will be appended\n});\n\n// the entry stored in the rendered node cache, and per each \"hole\"\nconst createEntry = (type, template) => {\n  const {content, updates} = mapUpdates(type, template);\n  return {type, template, content, updates, wire: null};\n};\n\n// a template is instrumented to be able to retrieve where updates are needed.\n// Each unique template becomes a fragment, cloned once per each other\n// operation based on the same template, i.e. data => html`<p>${data}</p>`\nconst mapTemplate = (type, template) => {\n  const svg = type === 'svg';\n  const text = instrument(template, prefix, svg);\n  const content = createContent(text, svg);\n  // once instrumented and reproduced as fragment, it's crawled\n  // to find out where each update is in the fragment tree\n  const tw = createTreeWalker(content, 1 | 128);\n  const nodes = [];\n  const length = template.length - 1;\n  let i = 0;\n  // updates are searched via unique names, linearly increased across the tree\n  // <div is\u00B50=\"attr\" is\u00B51=\"other\"><!--is\u00B52--><style><!--is\u00B53--</style></div>\n  let search = `${prefix}${i}`;\n  while (i < length) {\n    const node = tw.nextNode();\n    // if not all updates are bound but there's nothing else to crawl\n    // it means that there is something wrong with the template.\n    if (!node)\n      throw `bad template: ${text}`;\n    // if the current node is a comment, and it contains is\u00B5X\n    // it means the update should take care of any content\n    if (node.nodeType === 8) {\n      // The only comments to be considered are those\n      // which content is exactly the same as the searched one.\n      if (node.data === search) {\n        nodes.push({type: 'node', path: createPath(node)});\n        search = `${prefix}${++i}`;\n      }\n    }\n    else {\n      // if the node is not a comment, loop through all its attributes\n      // named is\u00B5X and relate attribute updates to this node and the\n      // attribute name, retrieved through node.getAttribute(\"is\u00B5X\")\n      // the is\u00B5X attribute will be removed as irrelevant for the layout\n      // let svg = -1;\n      while (node.hasAttribute(search)) {\n        nodes.push({\n          type: 'attr',\n          path: createPath(node),\n          name: node.getAttribute(search)\n        });\n        node.removeAttribute(search);\n        search = `${prefix}${++i}`;\n      }\n      // if the node was a style, textarea, or others, check its content\n      // and if it is <!--is\u00B5X--> then update tex-only this node\n      if (\n        textOnly.test(node.localName) &&\n        node.textContent.trim() === `<!--${search}-->`\n      ){\n        node.textContent = '';\n        nodes.push({type: 'text', path: createPath(node)});\n        search = `${prefix}${++i}`;\n      }\n    }\n  }\n  // once all nodes to update, or their attributes, are known, the content\n  // will be cloned in the future to represent the template, and all updates\n  // related to such content retrieved right away without needing to re-crawl\n  // the exact same template, and its content, more than once.\n  return {content, nodes};\n};\n\n// if a template is unknown, perform the previous mapping, otherwise grab\n// its details such as the fragment with all nodes, and updates info.\nconst mapUpdates = (type, template) => {\n  const {content, nodes} = (\n    cache.get(template) ||\n    cache.set(template, mapTemplate(type, template))\n  );\n  // clone deeply the fragment\n  const fragment = importNode(content, true);\n  // and relate an update handler per each node that needs one\n  const updates = nodes.map(handlers, fragment);\n  // return the fragment and all updates to use within its nodes\n  return {content: fragment, updates};\n};\n\n// as html and svg can be nested calls, but no parent node is known\n// until rendered somewhere, the unroll operation is needed to\n// discover what to do with each interpolation, which will result\n// into an update operation.\nexport const unroll = (info, {type, template, values}) => {\n  // interpolations can contain holes and arrays, so these need\n  // to be recursively discovered\n  const length = unrollValues(info, values);\n  let {entry} = info;\n  // if the cache entry is either null or different from the template\n  // and the type this unroll should resolve, create a new entry\n  // assigning a new content fragment and the list of updates.\n  if (!entry || (entry.template !== template || entry.type !== type))\n    info.entry = (entry = createEntry(type, template));\n  const {content, updates, wire} = entry;\n  // even if the fragment and its nodes is not live yet,\n  // it is already possible to update via interpolations values.\n  for (let i = 0; i < length; i++)\n    updates[i](values[i]);\n  // if the entry was new, or representing a different template or type,\n  // create a new persistent entity to use during diffing.\n  // This is simply a DOM node, when the template has a single container,\n  // as in `<p></p>`, or a \"wire\" in `<p></p><p></p>` and similar cases.\n  return wire || (entry.wire = persistent(content));\n};\n\n// the stack retains, per each interpolation value, the cache\n// related to each interpolation value, or null, if the render\n// was conditional and the value is not special (Array or Hole)\nconst unrollValues = ({stack}, values) => {\n  const {length} = values;\n  for (let i = 0; i < length; i++) {\n    const hole = values[i];\n    // each Hole gets unrolled and re-assigned as value\n    // so that domdiff will deal with a node/wire, not with a hole\n    if (hole instanceof Hole)\n      values[i] = unroll(\n        stack[i] || (stack[i] = createCache()),\n        hole\n      );\n    // arrays are recursively resolved so that each entry will contain\n    // also a DOM node or a wire, hence it can be diffed if/when needed\n    else if (isArray(hole))\n      unrollValues(stack[i] || (stack[i] = createCache()), hole);\n    // if the value is nothing special, the stack doesn't need to retain data\n    // this is useful also to cleanup previously retained data, if the value\n    // was a Hole, or an Array, but not anymore, i.e.:\n    // const update = content => html`<div>${content}</div>`;\n    // update(listOfItems); update(null); update(html`hole`)\n    else\n      stack[i] = null;\n  }\n  if (length < stack.length)\n    stack.splice(length);\n  return length;\n};\n\n/**\n * Holds all details wrappers needed to render the content further on.\n * @constructor\n * @param {string} type The hole type, either `html` or `svg`.\n * @param {string[]} template The template literals used to the define the content.\n * @param {Array} values Zero, one, or more interpolated values to render.\n */\nexport class Hole {\n  constructor(type, template, values) {\n    this.type = type;\n    this.template = template;\n    this.values = values;\n  }\n};\n", "import {MapSet, WeakMapSet} from '@webreflection/mapset';\n\nimport {Hole, createCache, unroll} from './rabbit.js';\n\n// both `html` and `svg` template literal tags are polluted\n// with a `for(ref[, id])` and a `node` tag too\nconst tag = type => {\n  // both `html` and `svg` tags have their own cache\n  const keyed = new WeakMapSet;\n  // keyed operations always re-use the same cache and unroll\n  // the template and its interpolations right away\n  const fixed = cache => (template, ...values) => unroll(\n    cache,\n    {type, template, values}\n  );\n  return Object.assign(\n    // non keyed operations are recognized as instance of Hole\n    // during the \"unroll\", recursively resolved and updated\n    (template, ...values) => new Hole(type, template, values),\n    {\n      // keyed operations need a reference object, usually the parent node\n      // which is showing keyed results, and optionally a unique id per each\n      // related node, handy with JSON results and mutable list of objects\n      // that usually carry a unique identifier\n      for(ref, id) {\n        const memo = keyed.get(ref) || keyed.set(ref, new MapSet);\n        return memo.get(id) || memo.set(id, fixed(createCache()));\n      },\n      // it is possible to create one-off content out of the box via node tag\n      // this might return the single created node, or a fragment with all\n      // nodes present at the root level and, of course, their child nodes\n      node: (template, ...values) => unroll(createCache(), new Hole(type, template, values)).valueOf()\n    }\n  );\n};\n\n// each rendered node gets its own cache\nconst cache = new WeakMapSet;\n\n// rendering means understanding what `html` or `svg` tags returned\n// and it relates a specific node to its own unique cache.\n// Each time the content to render changes, the node is cleaned up\n// and the new new content is appended, and if such content is a Hole\n// then it's \"unrolled\" to resolve all its inner nodes.\nconst render = (where, what) => {\n  const hole = typeof what === 'function' ? what() : what;\n  const info = cache.get(where) || cache.set(where, createCache());\n  const wire = hole instanceof Hole ? unroll(info, hole) : hole;\n  if (wire !== info.wire) {\n    info.wire = wire;\n    // valueOf() simply returns the node itself, but in case it was a \"wire\"\n    // it will eventually re-append all nodes to its fragment so that such\n    // fragment can be re-appended many times in a meaningful way\n    // (wires are basically persistent fragments facades with special behavior)\n    where.replaceChildren(wire.valueOf());\n  }\n  return where;\n};\n\nconst html = tag('html');\nconst svg = tag('svg');\n\nexport {Hole, render, html, svg};\n", "export default function clone(target, map = new WeakMap()) {\n\n  // Return the value if target is not an object or null\n  if (target === null\n    || typeof target !== 'object'\n    || typeof target === 'function'\n    || target instanceof HTMLElement) {\n    return target\n  }\n\n  // Check whether target is an array.\n  let cloneTarget = Array.isArray(target) ? [] : {};\n\n  // Use WeakMap to prevent circular references.\n  if (map.get(target)) {\n    return map.get(target);\n  }\n  map.set(target, cloneTarget);\n\n  for (const key in target) {\n    cloneTarget[key] = clone(target[key], map);\n  }\n\n  return cloneTarget;\n};", "let promise, convert;\n\nasync function moduleImport() {\n\n  if (!promise) promise = new Promise(async resolve => {\n\n    import('https://cdn.skypack.dev/convert@4')\n      .then(mod => resolve(convert = mod.convert))\n\n  })\n\n  await promise\n}\n\nexport default async (value, params) => {\n\n  await moduleImport()\n\n  value = parseFloat(value)\n\n  if (params.units && params.convertTo) {\n\n    value = convert(value, params.units).to(params.convertTo);\n  }\n\n  value = value.toFixed(params.decimals || 0)\n\n  value = value.toLocaleString(params.locale || 'en-GB')\n\n  return `${params.prefix || ''}${value}${params.suffix || ''}`\n}", "// Create temporary textarea to copy string to clipboard.\nexport function copyToClipboard(str) {\n\n  let textArea = document.body.appendChild(mapp.utils.html.node`\n    <textarea style=\"visibility=none;\">`);\n  \n  textArea.value = str;\n  textArea.select();\n  document.execCommand('copy');\n  textArea.remove();\n\n}", "export function dataURLtoBlob(dataURL) {\n\n  if (dataURL.indexOf(';base64,') == -1) {\n    let\n      parts = dataURL.split(','),\n      contentType = parts[0].split(':')[1],\n      raw = parts[1];\n  \n    return new Blob([raw], { type: contentType });\n  }\n  \n  let\n    parts = dataURL.split(';base64,'),\n    contentType = parts[0].split(':')[1],\n    raw = window.atob(parts[1]),\n    uInt8Array = new Uint8Array(raw.length);\n  \n  for (let i = 0; i < raw.length; ++i) {\n    uInt8Array[i] = raw.charCodeAt(i);\n  }\n  \n  return new Blob([uInt8Array], { type: contentType });\n}", "/*\n * Copyright (C) 2019 HERE Europe B.V.\n * Licensed under MIT, see full license in LICENSE\n * SPDX-License-Identifier: MIT\n * License-Filename: LICENSE\n */\nconst DEFAULT_PRECISION = 5;\n\nconst ENCODING_TABLE = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\";\n\nconst DECODING_TABLE = [\n    62, -1, -1, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1,\n    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21,\n    22, 23, 24, 25, -1, -1, -1, -1, 63, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35,\n    36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51\n];\n\nconst FORMAT_VERSION = 1;\n\nconst ABSENT = 0;\nconst LEVEL = 1;\nconst ALTITUDE = 2;\nconst ELEVATION = 3;\n// Reserved values 4 and 5 should not be selectable\nconst CUSTOM1 = 6;\nconst CUSTOM2 = 7;\n\nconst Num = typeof BigInt !== \"undefined\" ? BigInt : Number;\n\nfunction decode(encoded) {\n    const decoder = decodeUnsignedValues(encoded);\n    const header = decodeHeader(decoder[0], decoder[1]);\n\n    const factorDegree = 10 ** header.precision;\n    const factorZ = 10 ** header.thirdDimPrecision;\n    const { thirdDim } = header;\n\n    let lastLat = 0;\n    let lastLng = 0;\n    let lastZ = 0;\n    const res = [];\n\n    let i = 2;\n    for (;i < decoder.length;) {\n        const deltaLat = toSigned(decoder[i]) / factorDegree;\n        const deltaLng = toSigned(decoder[i + 1]) / factorDegree;\n        lastLat += deltaLat;\n        lastLng += deltaLng;\n\n        if (thirdDim) {\n            const deltaZ = toSigned(decoder[i + 2]) / factorZ;\n            lastZ += deltaZ;\n            res.push([lastLat, lastLng, lastZ]);\n            i += 3;\n        } else {\n            res.push([lastLat, lastLng]);\n            i += 2;\n        }\n    }\n\n    if (i !== decoder.length) {\n        throw new Error('Invalid encoding. Premature ending reached');\n    }\n\n    return {\n        ...header,\n        polyline: res,\n    };\n}\n\nfunction decodeChar(char) {\n    const charCode = char.charCodeAt(0);\n    return DECODING_TABLE[charCode - 45];\n}\n\nfunction decodeUnsignedValues(encoded) {\n    let result = Num(0);\n    let shift = Num(0);\n    const resList = [];\n\n    encoded.split('').forEach((char) => {\n        const value = Num(decodeChar(char));\n        result |= (value & Num(0x1F)) << shift;\n        if ((value & Num(0x20)) === Num(0)) {\n            resList.push(result);\n            result = Num(0);\n            shift = Num(0);\n        } else {\n            shift += Num(5);\n        }\n    });\n\n    if (shift > 0) {\n        throw new Error('Invalid encoding');\n    }\n\n    return resList;\n}\n\nfunction decodeHeader(version, encodedHeader) {\n    if (+version.toString() !== FORMAT_VERSION) {\n        throw new Error('Invalid format version');\n    }\n    const headerNumber = +encodedHeader.toString();\n    const precision = headerNumber & 15;\n    const thirdDim = (headerNumber >> 4) & 7;\n    const thirdDimPrecision = (headerNumber >> 7) & 15;\n    return { precision, thirdDim, thirdDimPrecision };\n}\n\nfunction toSigned(val) {\n    // Decode the sign from an unsigned value\n    let res = val;\n    if (res & Num(1)) {\n        res = ~res;\n    }\n    res >>= Num(1);\n    return +res.toString();\n}\n\nfunction encode({ precision = DEFAULT_PRECISION, thirdDim = ABSENT, thirdDimPrecision = 0, polyline }) {\n    // Encode a sequence of lat,lng or lat,lng(,{third_dim}). Note that values should be of type BigNumber\n    //   `precision`: how many decimal digits of precision to store the latitude and longitude.\n    //   `third_dim`: type of the third dimension if present in the input.\n    //   `third_dim_precision`: how many decimal digits of precision to store the third dimension.\n\n    const multiplierDegree = 10 ** precision;\n    const multiplierZ = 10 ** thirdDimPrecision;\n    const encodedHeaderList = encodeHeader(precision, thirdDim, thirdDimPrecision);\n    const encodedCoords = [];\n\n    let lastLat = Num(0);\n    let lastLng = Num(0);\n    let lastZ = Num(0);\n    polyline.forEach((location) => {\n        const lat = Num(Math.round(location[0] * multiplierDegree));\n        encodedCoords.push(encodeScaledValue(lat - lastLat));\n        lastLat = lat;\n\n        const lng = Num(Math.round(location[1] * multiplierDegree));\n        encodedCoords.push(encodeScaledValue(lng - lastLng));\n        lastLng = lng;\n\n        if (thirdDim) {\n            const z = Num(Math.round(location[2] * multiplierZ));\n            encodedCoords.push(encodeScaledValue(z - lastZ));\n            lastZ = z;\n        }\n    });\n\n    return [...encodedHeaderList, ...encodedCoords].join('');\n}\n\nfunction encodeHeader(precision, thirdDim, thirdDimPrecision) {\n    // Encode the `precision`, `third_dim` and `third_dim_precision` into one encoded char\n    if (precision < 0 || precision > 15) {\n        throw new Error('precision out of range. Should be between 0 and 15');\n    }\n    if (thirdDimPrecision < 0 || thirdDimPrecision > 15) {\n        throw new Error('thirdDimPrecision out of range. Should be between 0 and 15');\n    }\n    if (thirdDim < 0 || thirdDim > 7 || thirdDim === 4 || thirdDim === 5) {\n        throw new Error('thirdDim should be between 0, 1, 2, 3, 6 or 7');\n    }\n\n    const res = (thirdDimPrecision << 7) | (thirdDim << 4) | precision;\n    return encodeUnsignedNumber(FORMAT_VERSION) + encodeUnsignedNumber(res);\n}\n\nfunction encodeUnsignedNumber(val) {\n    // Uses variable integer encoding to encode an unsigned integer. Returns the encoded string.\n    let res = '';\n    let numVal = Num(val);\n    while (numVal > 0x1F) {\n        const pos = (numVal & Num(0x1F)) | Num(0x20);\n        res += ENCODING_TABLE[pos];\n        numVal >>= Num(5);\n    }\n    return res + ENCODING_TABLE[numVal];\n}\n\nfunction encodeScaledValue(value) {\n    // Transform a integer `value` into a variable length sequence of characters.\n    //   `appender` is a callable where the produced chars will land to\n    let numVal = Num(value);\n    const negative = numVal < 0;\n    numVal <<= Num(1);\n    if (negative) {\n        numVal = ~numVal;\n    }\n\n    return encodeUnsignedNumber(numVal);\n}\n\nexport default {\n  decodeIsoline: decode,\n  geometryFunction\n}\n\nfunction geometryFunction(coordinates, layer, params) {\n\n  const geometry = new ol.geom.Circle(coordinates, params.range * 1000)\n\n  const origin = ol.proj.transform(coordinates, `EPSG:${layer.mapview.srid}`, 'EPSG:4326')\n\n  const _params = {\n    'range[type]': params['range[type]'],\n    'range[values]': params.range * 60,\n    transportMode: params.transportMode,\n    optimizeFor: params.optimizeFor,\n    origin: `${origin[1]},${origin[0]}`\n  }\n\n  params.lat = origin[1]\n  params.lon = origin[0]\n\n  if (params.dateISO) {\n    _params[params.reverseDirection && 'arrivalTime' || 'departureTime'] = new Date(params.dateISO).toISOString()\n  }\n\n  mapp.utils\n    .xhr(`${layer.mapview.host}/api/proxy?url=${encodeURIComponent(`https://isoline.router.hereapi.com/v8/isolines?${mapp.utils.paramString(_params)}&{HERE}`)}`)\n    .then(response => {\n\n      if (!response.isolines) {\n        console.log(response)\n        return alert('Query failed.')\n      }\n\n      const _coordinates = decode(response.isolines[0].polygons[0].outer)\n\n      _coordinates.polyline.forEach(p => p.reverse())\n\n      _coordinates.polyline.push(_coordinates.polyline[0])\n\n      const feature = layer.mapview.interaction.format.readFeature({\n        type: 'Feature',\n        geometry: {\n          type: 'Polygon',\n          coordinates: [_coordinates.polyline]\n        }\n      }, {\n        dataProjection: 'EPSG:4326',\n        featureProjection: 'EPSG:' + layer.mapview.srid\n      })\n\n      layer.mapview.interaction.Layer.getSource().clear();\n\n      layer.mapview.interaction.Layer.getSource().addFeature(feature);\n\n    })\n\n  return geometry\n}", "export default (hex, transparency) => {\n  if (isNaN(transparency)) return hex;\n\n  if (hex.length === 7) return hex + (transparency && parseInt(transparency * 255).toString(16) || '00');\n\n  if (hex.length === 4) return hex + parseInt(transparency * 15).toString(16);\n\n  return hex;\n}\n", "export default plugins => {\n\n  if (!Array.isArray(plugins)) return;\n  \n  return new Promise(resolveAll=>{\n\n    const promises = plugins.map(\n      plugin => \n        new Promise((resolve, reject) => \n          import(plugin)\n          .then(mod=> {\n            resolve(mod)\n          })\n          .catch(reject)))\n\n    Promise\n      .all(promises)\n      .then(mods=>{\n        resolveAll(mods)\n      })\n      .catch(resolveAll)\n\n  })\n}", "export default (coordinates, layer, params) => {\n\n  const geometry = new ol.geom.Circle(coordinates, params.minutes * 1000)\n\n  const origin = ol.proj.transform(coordinates, `EPSG:${layer.mapview.srid}`, 'EPSG:4326')\n\n  mapp.utils\n    .xhr(`https://api.mapbox.com/isochrone/v1/mapbox/${params.profile}/${origin.join(',')}?${mapp.utils.paramString({\n        contours_minutes: params.minutes,\n        //generalize: params.minutes,\n        polygons: true,\n        access_token: params.access_token\n      })}`)\n    .then(response => {\n\n      if (!response.features) return;\n\n      const feature = layer.mapview.interaction.format.readFeature({\n        type: 'Feature',\n        geometry: response.features[0].geometry\n      }, {\n        dataProjection: 'EPSG:4326',\n        featureProjection: 'EPSG:' + layer.mapview.srid\n      })\n\n      layer.mapview.interaction.Layer.getSource().clear();\n\n      layer.mapview.interaction.Layer.getSource().addFeature(feature);\n\n    })\n\n  return geometry\n\n}", "export default function (callback, options = {\n  //enableHighAccuracy: false,\n  //timeout: 3000,\n  //maximumAge: 0\n}) {\n\n  navigator.geolocation.getCurrentPosition(\n    callback,\n    err => console.error(err),\n    options)\n\n}", "export default function mergeDeep(target, ...sources) {\n\n  // No sources to merge.\n  if (!sources.length) {\n    return target;\n  }\n\n  const source = sources.shift();\n\n  if (isObject(target) && isObject(source)) {\n\n    // Iterate over object keys in source.\n    for (const key in source) {\n\n      if (isObject(source[key])) {\n\n        // Assign empty object on key.\n        if (!target[key]) Object.assign(target, { [key]: {} });\n\n        // Call recursive merge for target key object.\n        mergeDeep(target[key], source[key]);\n\n      } else {\n\n        // Assign key if not an object itself.\n        Object.assign(target, { [key]: source[key] });\n      }\n    }\n  }\n\n  return mergeDeep(target, ...sources);\n}\n\nfunction isObject(item) {\n  return (item && typeof item === 'object' && !Array.isArray(item));\n}", "// Create param string for XHR request.\nexport default params => Object.entries(params)\n  .filter(entry => entry[1] === 0 || !!entry[1])\n  .filter(entry => entry[1] !== '{}')\n\n  // Filter out zero length array and objects with empty object values.\n  .filter(entry => typeof entry[1] !== 'object'\n    || entry[1].length\n    || Object.values(entry[1]).some(val => typeof val === 'object' && Object.keys(val).length))\n\n  .map(entry => {\n\n    // if (Array.isArray(entry[1])) {\n\n    //   return entry[1].map(val => `${entry[0]}=${val}`).join('&')\n    // }\n\n    // Stringify non array objects.\n    if (typeof entry[1] === 'object' && !Array.isArray(entry[1])) {\n\n      entry[1] = JSON.stringify(entry[1])\n\n    }\n\n    return encodeURI(`${entry[0]}=${entry[1]}`)\n\n  }).join('&')", "export default promises => new Promise((resolveAll, rejectAll) => {\n\n  Promise\n    .all(promises)\n    .then(resolveAll)\n    .catch(error => {\n      console.error(error)\n      rejectAll(error)\n    })\n\n})", "export default _this => {\n  \n  // Assign empty object if not defined.\n  _this.queryparams = _this.queryparams || {}\n\n  // The layer queryparam must be true to support viewport params.\n  _this.queryparams.layer = _this.queryparams.layer || _this.viewport\n\n  // Assign fieldValues from the location to queryparams.\n  if (Array.isArray(_this.queryparams.fieldValues) && _this.location) {\n\n    // Iterate through the fieldValues array.\n    _this.queryparams.fieldValues.forEach(field => {\n\n      // Find entry in location infoj matching the field.\n      let entry = _this.location.infoj.find(entry => entry.field === field)\n\n      // Assign entry value as field value in queryparams.\n      _this.queryparams[field] = entry.value\n    })\n  }\n\n  // Get bounds from mapview.\n  const bounds = _this.viewport && _this.layer.mapview.getBounds();\n\n  // Get center from mapview.\n  const center = _this.queryparams.center && ol.proj.transform(\n    _this.layer.mapview.Map.getView().getCenter(),\n    `EPSG:${_this.layer.mapview.srid}`,\n    `EPSG:4326`)\n\n\n  return Object.assign({}, _this.queryparams, {\n\n    // Queries will fail if the template can not be accessed in workspace.\n    template: encodeURIComponent(_this.query),\n\n    // Layer filter can only be applied if the layer is provided as reference to a layer object in the layers list.\n    filter: _this.queryparams.filter && _this.layer.filter?.current,\n\n    // Locale param is only required for layer lookups.\n    locale: _this.queryparams.layer && _this.layer.mapview.locale.key,\n\n    // Locale param is only required for layer lookups.\n    layer: _this.queryparams.layer && _this.layer.key,\n\n    // ID will be taken if a location object is provided with the params.\n    id: _this.queryparams?.id && _this.location?.id,\n\n    // lat lng must be explicit or the the center flag param must be set.\n    lat: center && center[1],\n    lng: center && center[0],\n\n    // z will generated if the z flag is set in the params.\n    z: _this.queryparams?.z && _this.layer.mapview.Map.getView().getZoom(),\n\n    // Viewport will onlcy be generated if the viewport flag is set on the params.\n    viewport: bounds && [bounds.west, bounds.south, bounds.east, bounds.north, _this.layer.mapview.srid],\n\n    // The fieldValues array entries should not be part of the url params.\n    fieldValues: undefined\n\n  })\n}", "export default (style, feature) => {\n\n  if (!style) return;\n\n  // Iterate through icon layers\n  if (Array.isArray(style.icon?.layers)) {\n\n    // Map array of styles to the style object.\n    style = style.icon.layers.map(layer => {\n\n      // Clone the style for each layer.\n      let styleClone = mapp.utils.clone(style)\n\n      // Assign the layer style to the cloned icon style.\n      Object.assign(styleClone.icon, layer)\n\n      // Return the cloned style to the style array.\n      return styleClone\n    })\n  }\n\n  // Create an OL style (or array of).\n  const olStyle = Array.isArray(style)\n    && style.map(style => getOlStyle(style, feature))\n    || getOlStyle(style, feature)\n  \n  return olStyle\n}\n\nfunction getOlStyle (style, feature) {\n\n  style.fill = style.fillColor && new ol.style.Fill({\n    color: mapp.utils.hexa(style.fillColor, style.fillOpacity)\n  })\n\n  style.stroke = style.strokeColor && new ol.style.Stroke({\n    color: mapp.utils.hexa(style.strokeColor, style.strokeOpacity),\n    width: parseFloat(style.strokeWidth || 1)\n  })\n\n  style.image = style.icon && icon(style.icon, feature)\n\n  if (style.image === null) return;\n\n  style.text = style.label?.text && new ol.style.Text({\n    font: style.label.font || '12px sans-serif',\n    text: String(style.label.text),\n    overflow: style.label.overflow,\n    stroke: style.label.strokeColor && new ol.style.Stroke({\n      color: style.label.strokeColor,\n      width: style.label.strokeWidth || 1\n    }),\n    fill: new ol.style.Fill({\n      color: style.label.fillColor || '#000'\n    })\n  })\n\n  return new ol.style.Style(style)\n}\n\nconst memoizedIcons = new Map()\n\nfunction icon(icon, feature) {\n\n  // Assign feature properties for memoization\n  Object.assign(icon, feature && feature.getProperties())\n\n  // Calculate scale for icon render\n  let scale = icon.scale || 1\n  scale *= icon.clusterScale || 1\n  scale *= icon.zoomInScale || 1\n  scale *= icon.zoomOutScale || 1\n  scale *= icon.highlightScale || 1\n\n  // Remove scales for memoization\n  delete icon.scale\n  delete icon.clusterScale\n  delete icon.zoomInScale\n  delete icon.zoomOutScale\n  delete icon.highlightScale\n\n  // Check memoization\n  if (memoizedIcons.has(icon)) {\n   \n    icon.url = memoizedIcons.get(icon)\n\n  } else {\n\n    // Create icon url from svgSymbols method if not defined as url or svg source\n    icon.url = icon.url || icon.svg || mapp.utils.svgSymbols[icon.type](icon, feature)\n\n    memoizedIcons.set(icon, icon.url)\n  }\n\n  return new ol.style.Icon({\n    src: icon.url,\n    crossOrigin: 'anonymous',\n    scale: scale,\n    anchor: icon.anchor || [0.5, 0.5],\n  })\n}", "import { svg } from 'uhtml'\n\nconst xmlSerializer = new XMLSerializer()\n\nexport function dot(style) {\n\n  const icon = svg.node`\n    <svg width=24 height=24 viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>\n      <circle cx=13 cy=13 r=10 fill='#333'></circle>\n      <circle cx=12 cy=12 r=10 fill=${style.fillColor || '#fff'}></circle>`\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function target(style) {\n\n  const icon = svg.node`\n    <svg width=24 height=24 viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>\n      <circle cx=13 cy=13 fill='#333' r=10 opacity=0.4></circle>\n      <circle cx=12 cy=12 r=10 fill=${style.fillColor || '#FFF'}>`\n\n  style.layers && Object.entries(style.layers).forEach(layer => {\n\n    icon.appendChild(svg.node`<circle cx=12 cy=12 r=${parseFloat(layer[0]) * 10} fill=${layer[1]}>`)\n  })\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function triangle(style) {\n\n  const icon = svg.node`\n    <svg width=24 height=24 viewBox='${`0 0 24 24`}' xmlns='http://www.w3.org/2000/svg'>\n      <polygon\n        points=\"12,4.68 2,22 22,22\" \n        fill=\"#333\" stroke=\"#333\" opacity=0.4 stroke-opacity=0.4 stroke-width=3\n        stroke-linejoin=\"round\"/>`\n\n  icon.appendChild(svg.node`\n    <polygon\n      fill=${style.fillColor || '#FFF'} stroke=${style.fillColor || '#FFF'} stroke-width=2\n      points=\"12,4.68 2,22 22,22\"  stroke-linejoin=\"round\"/>`)\n\n  style.layers && Object.entries(style.layers).forEach(layer => {\n\n    function x(val, scale) {\n      return 12 + (val - 12) * scale\n    }\n\n    function y(val, scale) {\n      return 16 + (val - 16) * scale\n    }\n\n    let points = `${x(12, layer[0])},${y(4.68, layer[0])} ${x(2, layer[0])}, ${y(22, layer[0])} ${x(22, layer[0])}, ${y(22, layer[0])}`\n\n    icon.appendChild(svg.node`\n      <polygon\n        points=\"${points}\"\n        fill=${layer[1]}\n        stroke=${layer[1] || '#FFF'}\n        stroke-width=1\n        stroke-linejoin=\"round\"/>`)\n  })\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function square(style) {\n\n  const icon = svg.node`\n    <svg width=24 height=24 viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>\n      <rect fill='#333' opacity=0.3 width=20 height=20 x=2 y=2 rx=1></rect>\n      <rect fill=${style.fillColor || '#FFF'} width=20 height=20 x=0 y=0 rx=1></rect>`\n\n  style.layers && Object.entries(style.layers).forEach(layer => {\n\n    icon.appendChild(svg.node`\n      <rect fill=${layer[1]}\n        width=${parseFloat(layer[0]) * 20}\n        height=${parseFloat(layer[0]) * 20}\n        x=${10*(1-parseFloat(layer[0]))}\n        y=${10*(1-parseFloat(layer[0]))} rx=${parseFloat(layer[0])}></rect>`)\n  })\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function diamond(style) {\n\n  const icon = svg.node`\n    <svg width=24 height=24 viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>\n      <polygon\n        fill='#333'\n        opacity=0.3\n        points=\"12 0, 24 12, 12 24, 0 12\"></polygon>\n      <polygon\n        fill=${style.fillColor || '#FFF'}\n        points=\"12 0, 24 12, 12 24, 0 12\"></polygon>`\n\n  function s(val, scale) {\n    return 12 + (val - 12) * scale\n  }\n\n  style.layers && Object.entries(style.layers).forEach(layer => {\n    \n    let points = `${s(12, layer[0])} ${s(0, layer[0])},${s(24, layer[0])} ${s(12, layer[0])},${s(12, layer[0])} ${s(24, layer[0])}, ${s(0, layer[0])} ${s(12, layer[0])}`\n\n    icon.appendChild(svg.node`\n      <polygon\n        fill=${layer[1] || '#FFF'}\n        points=\"${points}\"></polygon>`)\n  })\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function semiCircle(style) {\n\n  const icon = svg.node`\n    <svg width=30 height=30 viewBox='0 0 20 24' xmlns='http://www.w3.org/2000/svg'>\n      <defs>\n        <clipPath id=\"cut-off-shade\">\n          <rect x=\"0\" y=\"0\" width=\"24\" height=\"11\"/>\n        </clipPath>\n        <clipPath id=\"cut-off\">\n          <rect x=\"0\" y=\"0\" width=\"24\" height=\"10\"/>\n        </clipPath>\n      </defs>\n      <circle cx=\"11\" cy=\"10\" r=\"10\" clip-path=\"url(#cut-off-shade)\" fill=\"#333\" opacity=0.4></circle>\n      <circle cx=10 cy=10 r=10 fill=${style.fillColor || '#FFF'} clip-path=\"url(#cut-off-shade)\">`\n\n  style.layers && Object.entries(style.layers).forEach(layer => {\n    \n    icon.appendChild(svg.node`\n      <circle cx=10 cy=10 r=${parseFloat(layer[0]) * 10} fill=${layer[1]} clip-path=\"url(#cut-off-shade)\">`)\n\n  })\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function markerLetter(style) {\n\n  const icon = svg.node`\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path fill=\"${style.color}\"\n        d=\"M 12 1.969 C 7.878 1.969 4.813 5.239 4.813 9.328 C 4.813 10.554 5.222 12.189 6.244 14.028 C 8.289 17.504 12 22 12 22 C 12 22 16.055 17.504 18.099 14.028 C 19.122 12.189 19.341 10.963 19.341 9.328 C 19.341 5.239 16.054 1.969 12 1.969 Z\"/>\n      <circle cx=\"12.17192400568182\" cy=\"8.918683238636365\" r=\"5.109789772727275\" fill=\"rgb(255, 255, 255)\"/>\n      <text x=\"12\" y=\"12\" style=\"text-anchor: middle; font-weight: 600; font-size: 9px; font-family: sans-serif; fill: rgb(85, 85, 85);\">\n      ${style.letter}`\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function markerColor(style) {\n\n  const icon = svg.node`\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path style=\"opacity: 0.5;\" fill=\"${style.colorMarker}\"\n        d=\"M 10.797 1.238 C 6.308 1.238 2.716 4.83 2.716 9.32 C 2.716 11.116 3.165 12.463 4.287 14.483 C 6.532 18.3 9.952 23.234 9.952 23.234 C 9.952 23.234 15.063 18.3 17.308 14.483 C 18.43 12.463 18.879 11.116 18.879 9.32 C 18.879 4.83 15.287 1.238 10.797 1.238 Z\"/>\n      <path fill=\"${style.colorMarker}\"\n        d=\"M 10 1.238 C 5.51 1.238 2.144 4.83 2.144 9.32 C 2.144 10.667 2.593 12.463 3.716 14.483 C 5.961 18.3 10 23.238 10 23.238 C 10 23.238 14.491 18.3 16.736 14.483 C 17.859 12.463 18.1 11.116 18.1 9.32 C 18.1 4.83 14.49 1.238 10 1.238 Z\"/>\n      <circle cx=\"10.226\" cy=\"8.871\" r=\"5.612\" opacity=\"0.8\" fill=\"rgb(255, 255, 255)\"/>\n      <circle cx=\"10.226\" cy=\"8.871\" r=\"2.806\" opacity=\"0.8\" fill=\"${style.colorDot}\"/>`\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function circle(style) {\n\n  const icon = svg.node`\n    <svg width=24 height=24 viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'>\n      <circle cx=16 cy=16 r=10\n        stroke=\"${style.strokeColor || '#333'}\"\n        stroke-width=\"${style.strokeWidth || 1}\"\n        fill=\"#ffffff33\">`\n\n  return `data:image/svg+xml,${encodeURIComponent(xmlSerializer.serializeToString(icon))}`\n}\n\nexport function template(icon, feature) {\n\n  const params = Object.assign({}, icon.params, feature.getProperties())\n\n  let template = icon.template\n\n  for (const entry of Object.entries(params)) {\n    template = template.replaceAll(entry[0], entry[1]);\n  }\n\n  return `data:image/svg+xml,${encodeURIComponent(template)}`\n}", "export default feature => {\n\n  const geometry = feature.getGeometry()\n\n  const coords = geometry.getCoordinates()\n\n  const type = geometry.getType()\n\n  if (!coords) return;\n\n  if (type === 'Point') return new ol.geom.Point(geometry.getCoordinates())\n\n  if (type === 'LineString') return new ol.geom.MultiPoint(geometry.getCoordinates())\n\n  var coordinates = type === 'MultiPolygon' && geometry.getCoordinates()[0] || geometry.getCoordinates()\n\n  var mp = new ol.geom.MultiPoint(coordinates[0])\n\n  return mp\n}", "const requestMap = new Map()\n\nexport default params => new Promise((resolve, reject) => {\n\n  if (!params) return reject()\n\n  params = typeof params === 'string' ? { url: params } : params\n\n  // Check whether a request with the same params has already been resolved.\n  if (params.cache && requestMap.has(params)) return resolve(requestMap.get(params))\n\n  const xhr = new XMLHttpRequest()\n\n  xhr.open(params.method || 'GET', params.url)\n\n  const requestHeader = {\n    'Content-Type': 'application/json'\n  }\n\n  Object.assign(requestHeader, params.requestHeader || {})\n\n  Object.entries(requestHeader).forEach(entry=>xhr.setRequestHeader(...entry))\n\n  xhr.responseType = params.responseType || 'json'\n\n  xhr.onload = e => {\n\n    if (e.target.status >= 300) {\n      reject(new Error(e.target.status))\n      return;\n    }\n\n    // Cache the response in the requestMap\n    params.cache && requestMap.set(params, e.target.response)\n\n    resolve(e.target.response)\n  }\n\n  xhr.send(params.body)\n\n})", "// import from node modules\nimport {render, html, svg} from 'uhtml'\n\nconst areSetsEqual = (a, b) => a.size === b.size && [...a].every(value => b.has(value))\n\nconst debounce = (f, delay) => {\n  let timer = 0;\n  return function (...args) {\n    clearTimeout(timer);\n    timer = setTimeout(() => f.apply(this, args), delay);\n  }\n}\n\n// local import\nimport clone from './clone.mjs'\n\nconst compose = (...fns) => {\n  return arg => fns.reduce((acc, fn) => {\n    return fn(acc);\n  }, arg)\n}\n\nimport convert from './convert.mjs'\n\nimport {copyToClipboard} from './copyToClipboard.mjs'\n\nimport {dataURLtoBlob} from './dataURLtoBlob.mjs'\n\nimport here from './here.mjs'\n\nimport {default as hexa} from './hexa.mjs'\n\nimport loadPlugins from './loadPlugins.mjs'\n\nimport mapboxGeometryFunction from './mapboxGeometryFunction.mjs'\n\nimport getCurrentPosition from './getCurrentPosition.mjs'\n\nimport merge from './merge.mjs'\n\nimport paramString from './paramString.mjs'\n\nimport promiseAll from './promiseAll.mjs'\n\nimport queryParams from './queryParams.mjs'\n\nimport style from './style.mjs'\n\nimport * as svgSymbols from './svgSymbols.mjs'\n\nimport {default as verticeGeoms} from './verticeGeoms.mjs'\n\nimport xhr from './xhr.mjs'\n\nexport default {\n  render,\n  html,\n  svg,\n  convert,\n  areSetsEqual,\n  clone,\n  compose,\n  copyToClipboard,\n  dataURLtoBlob,\n  debounce,\n  getCurrentPosition,\n  here,\n  hexa,\n  loadPlugins,\n  mapboxGeometryFunction,\n  merge,\n  paramString,\n  promiseAll,\n  queryParams,\n  style,\n  svgSymbols,\n  verticeGeoms,\n  xhr,\n}", "const hooks = {\n  current: {\n    layers: [],\n    locations: [],\n  },\n  set,\n  parse,\n  remove,\n  removeAll,\n  push,\n  filter,\n}\n\nexport default hooks\n\nfunction parse() {\n\n  // Take hooks from URL and store as current hooks.\n  window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, (match, key, value) => {\n\n    // string 'false' should be boolean false\n    if (value === 'false') {\n\n      hooks.current[key] = false\n      return;\n    }\n\n    // string 'true' should be boolean true\n    if (value === 'true') {\n\n      hooks.current[key] = true\n      return;\n    }\n\n    // layers and locations should always be arrays\n    if (key === 'locations' || key === 'layers') {\n\n      hooks.current[key] = decodeURI(value).split(',')\n      return;\n    }\n    \n    hooks.current[key] = value.includes(',') && decodeURI(value).split(',') || value\n  })\n\n  // Strip token from url.\n  if (hooks.current.token) {\n    window.history.replaceState(\n      {},\n      document.title,\n      window.location.href.replace(new RegExp(`token=${hooks.current.token}`), ''))\n    delete hooks.current.token\n  }\n}\n\n// Add kvp hook to mapp.hooks.current and URI.\nfunction set(_hooks) {\n\n  Object.assign(hooks.current, _hooks)\n\n  pushState()\n}\n\n// Remove hook from mapp.hooks.current and URI.\nfunction remove(key) {\n\n  if (Array.isArray(hooks.current[key])) {\n\n    hooks.current[key].length = 0\n\n  } else {\n\n    delete hooks.current[key]\n  }\n\n  pushState()\n}\n\n// Remove all hooks.\nfunction removeAll() {\n\n  Object.keys(hooks.current).forEach(key => remove(key))\n\n  pushState()\n}\n\n// Push key into an array hook.\nfunction push(key, val) {\n\n  if (hooks.current[key]) {\n\n    if (hooks.current[key].indexOf(val) < 0) hooks.current[key].push(val)\n\n  } else {\n\n    hooks.current[key] = [val]\n  }\n\n  pushState()\n}\n\n// Filter key from an array hook.\nfunction filter(key, val) {\n\n  hooks.current[key] = hooks.current[key].filter(el => el !== val)\n\n  pushState()\n}\n\n// Pushes changes to the url parameter.\nfunction pushState() {\n\n  try {\n    window.history.pushState({},\n      document.title,\n      `?${mapp.utils.paramString(hooks.current)}`)\n\n  } catch (me) {\n    console.log(me)\n  }\n}", "export default {\n  save: \"Save\",\n  cancel: \"Cancel\",\n  confirm_delete: \"Are you sure you want to delete this feature? This cannot be undone.\",\n  invalid_geometry: \"Invalid geometry\",\n  no_results: \"No results for this search\",\n}", "export default {\n  save: \"Speichern\",\n  cancel: \"Abbrechen\",\n  invalid_geometry: \"Ung\u00FCltige Geometrie\",\n  confirm_delete: \"Best\u00E4tigung des L\u00F6schvorgang\",\n}", "export default {\n  save: \"Enregister\",\n  cancel: \"Annuler\",\n  no_results: \"Aucun resultat pour cette recherche\",\n}", "export default {\n  save: \"Zapisz\",\n  cancel: \"Anuluj\",\n  no_results: \"Nic nie znaleziono\",\n}", "export default {\n  save: \"\u4FDD\u5B58\",\n  cancel: \"\u30AD\u30E3\u30F3\u30BB\u30EB\",\n  no_results: \"\u7D50\u679C\u306A\u3057\",\n}", "export default {\n  save: \"\uC800\uC7A5\",\n  cancel: \"\uCDE8\uC18C\",\n  no_results: \"\uAC80\uC0C9\uACB0\uACFC \uC5C6\uC74C\",\n}", "export default {\n  save: \"\u4FDD\u5B58\",\n  cancel: \"\u53D6\u6D88\",\n  no_results: \"\u672A\u627E\u5230\u76F8\u5173\u5730\u70B9\", \n}", "import en from './en.mjs'\n\nimport de from './de.mjs'\n\nimport fr from './fr.mjs'\n\nimport pl from './pl.mjs'\n\nimport ja from './ja.mjs'\n\nimport ko from './ko.mjs'\n\nimport zh from './cn.mjs'\n\nexport default {\n  en: en,\n  de: de,\n  fr: fr,\n  pl: pl,\n  ja: ja,\n  ko: ko,\n  zh: zh,\n}", "let promise, maplibregl = null\n\nasync function MaplibreGL() {\n\n  if (maplibregl) return new maplibregl.Map(...arguments);\n\n  if (!promise) promise = new Promise(async resolve => {\n\n    if (window.maplibregl) {\n\n      maplibregl = window.maplibregl\n\n      resolve()\n  \n      return\n    }\n\n    Promise\n      .all([\n        import('https://cdn.skypack.dev/pin/maplibre-gl@v1.15.3-OFxGDsJNZ70P0Qa7CzNE/mode=imports,min/optimized/maplibre-gl.js')\n      ])\n      .then(imports => {\n  \n        maplibregl = imports[0]\n\n        resolve()\n      })\n      .catch(error => {\n        console.error(error.message)\n        alert('Failed to load MaplibreGL library. Please reload the browser.')\n      })\n  \n  })\n\n  await promise\n\n  return new maplibregl.Map(...arguments);\n}\n\nexport default async layer => {\n\n  const container = mapp.utils.html.node`\n    <div style=\"position: absolute; width: 100%; height: 100%;\">`\n\n  layer.mbMap = await MaplibreGL({\n    container: container,\n    style: layer.mbStyle,\n    accessToken: layer.accessToken,\n    attributionControl: false,\n    boxZoom: false,\n    doubleClickZoom: false,\n    dragPan: false,\n    dragRotate: false,\n    interactive: false,\n    keyboard: false,\n    pitchWithRotate: false,\n    scrollZoom: false,\n    touchZoomRotate: false,\n    preserveDrawingBuffer: layer.preserveDrawingBuffer\n  });\n\n  layer.L =  new ol.layer.Layer({\n    zIndex: layer.zIndex || 0,\n    render: frameState => {\n\n      if (!layer.display) return\n      \n      // adjust view parameters in mapbox\n      layer.mbMap.jumpTo({\n        center: ol.proj.toLonLat(frameState.viewState.center),\n        zoom: frameState.viewState.zoom - 1,\n        bearing: (-frameState.viewState.rotation * 180) / Math.PI,\n        animate: false\n      })\n\n      // cancel the scheduled update & trigger synchronous redraw\n      if (layer.mbMap._frame) {\n        layer.mbMap._frame.cancel()\n        layer.mbMap._frame = null\n      }\n\n      layer.mbMap._render()\n\n      if (!layer.resized) {\n        layer.resized = true\n        window.setTimeout(()=>layer.mbMap.resize(), 500)\n      }\n\n      return layer.mbMap.getContainer();\n    }\n  })\n\n}", "let promise, mapboxgl = null\n\nasync function MapboxGL() {\n\n  if (mapboxgl) return new mapboxgl.Map(...arguments);\n\n  if (!promise) promise = new Promise(async resolve => {\n\n    if (window.mapboxgl) {\n\n      mapboxgl = window.mapboxgl\n\n      resolve()\n  \n      return\n    }\n\n    Promise\n      .all([\n        import('https://cdn.skypack.dev/pin/mapbox-gl@v2.8.2-2X0QssQ9YYqMIe57RkqH/mode=imports,min/optimized/mapbox-gl.js')\n      ])\n      .then(imports => {\n  \n        mapboxgl = imports[0]\n\n        resolve()\n      })\n      .catch(error => {\n        console.error(error.message)\n        alert('Failed to load MapboxGL library. Please reload the browser.')\n      })\n  \n  })\n\n  await promise\n\n  return new mapboxgl.Map(...arguments);\n}\n\nexport default async layer => {\n\n  const container = mapp.utils.html.node`\n    <div style=\"position: absolute; width: 100%; height: 100%;\">`\n\n  layer.mbMap = await MapboxGL({\n    accessToken: layer.accessToken,\n    container: container,\n    style: layer.mbStyle,\n  });\n\n  layer.L =  new ol.layer.Layer({\n    zIndex: layer.zIndex || 0,\n    render: frameState => {\n\n      if (!layer.display) return\n      \n      // adjust view parameters in mapbox\n      layer.mbMap.jumpTo({\n        center: ol.proj.toLonLat(frameState.viewState.center),\n        zoom: frameState.viewState.zoom - 1,\n        bearing: (-frameState.viewState.rotation * 180) / Math.PI,\n        animate: false\n      })\n\n      // cancel the scheduled update & trigger synchronous redraw\n      if (layer.mbMap._frame) {\n        layer.mbMap._frame.cancel()\n        layer.mbMap._frame = null\n      }\n\n      layer.mbMap._render()\n\n      if (!layer.resized) {\n        layer.resized = true\n        window.setTimeout(()=>layer.mbMap.resize(), 500)\n      }\n\n      return layer.mbMap.getContainer();\n    }\n  })\n\n}", "export default layer => {\n\n  const url = layer.proxy\n    && `${layer.mapview.host}/api/proxy?url=${layer.URI}`\n    || layer.URI\n\n  const source = new ol.source.OSM({\n    url: decodeURIComponent(url),\n    opaque: false,\n    transition: 0,\n  })\n\n  layer.L = new ol.layer.Tile({\n    source: source,\n    layer: layer,\n    zIndex: layer.style.zIndex || 0\n  })\n\n}", "export default layer => {\n\n  layer.reload = () => {\n\n    //source.clear()\n    source.refresh()\n  }\n\n  layer.clones = new Set()\n\n  // The snapSource is required for snap interactions on vector tile layer.\n  // The featureClasss is detrimental to the render performance.\n  layer.snapSource = new ol.source.VectorTile({\n    format: new ol.format.MVT({\n      featureClass: ol.Feature,\n      //idProperty: 'id'\n    }),\n    transition: 0,\n    cacheSize: 0,\n    tileUrlFunction\n  })\n  \n  // Define source for mvt layer.\n  const source = new ol.source.VectorTile({\n    format: new ol.format.MVT(),\n    transition: 0,\n    cacheSize: 0,\n    tileUrlFunction\n  })\n\n  function tileUrlFunction(tileCoord) {\n\n    const tableZ = layer.tableCurrent()\n\n    if ((!tableZ || !layer.display) && !layer.clones?.size) return source.clear()\n\n    const url = `${layer.mapview.host}/api/layer/mvt/${tileCoord[0]}/${tileCoord[1]}/${tileCoord[2]}?` + mapp.utils.paramString({\n      locale: layer.mapview.locale.key,\n      layer: layer.key,\n      srid: layer.mapview.srid,\n      table: tableZ,\n      filter: layer.filter && layer.filter.current\n    })\n\n    return url\n  }\n\n  layer.L = new ol.layer.VectorTile({\n    key: layer.key,\n    source: source,\n    renderBuffer: 200,\n    //renderMode: 'vector',\n    zIndex: layer.style.zIndex || 1,\n    style: mapp.layer.Style(layer)\n  })\n\n}", "export default layer => {\n\n  layer.highlight = true\n\n  layer.reload = loader\n\n  function loader () {\n\n    if (!layer.display) return;\n\n    layer.mapview.popup(null)\n\n    if (layer.xhr) layer.xhr.abort()\n\n    const tableZ = layer.tableCurrent()\n\n    if (!tableZ) {\n      layer.L.getSource().clear()\n      return;\n    }\n\n    const extent = ol.proj.transformExtent(\n      layer.mapview.Map.getView().calculateExtent(layer.mapview.Map.getSize()),\n      `EPSG:${layer.mapview.srid}`,\n      `EPSG:${layer.srid}`)\n\n    layer.xhr = new XMLHttpRequest()\n\n    layer.xhr.open(\n      \"GET\",\n      `${layer.mapview.host}/api/layer/cluster/${layer.mapview.Map.getView().getZoom()}?` +\n        mapp.utils.paramString({\n          locale: layer.mapview.locale.key,\n          layer: layer.key,\n          table: tableZ,\n          kmeans: layer.cluster_kmeans || undefined,\n          dbscan: layer.cluster_dbscan || undefined,\n          resolution: layer.cluster_resolution || undefined,\n          hexgrid: layer.cluster_hexgrid,\n          theme: layer.style.theme?.type,\n          size: layer.style.theme?.size,\n          cat: layer.style.theme?.fieldfx || layer.style.theme?.field,\n          cat_template: layer.style.theme?.cat_template,\n          aggregate: layer.style.theme?.aggregate,\n          label: layer.style.label?.field,\n          label_template: layer.style.label?.template,\n          filter: layer.filter?.current,\n          viewport: [extent[0], extent[1], extent[2], extent[3]],\n        })\n    );\n\n    layer.xhr.setRequestHeader('Content-Type', 'application/json')\n    layer.xhr.responseType = 'json'\n\n    // Draw layer on load event.\n    layer.xhr.onload = e => {\n  \n      if (e.target.status !== 200) return;\n\n      const cluster = e.target.response\n\n      layer.max_size = cluster.reduce((max_size, f) => Math.max(max_size, f.properties.size || f.properties.count), 0)\n    \n      let id = 1\n    \n      const features = cluster.map(f => new ol.Feature(Object.assign({\n        id: id++,\n        geometry: new ol.geom.Point(\n          layer.srid == 4326 && ol.proj.fromLonLat([f.geometry.x, f.geometry.y]) || [f.geometry.x, f.geometry.y]\n        ),\n      },f.properties)))\n\n      layer.L.setSource(new ol.source.Vector({\n        useSpatialIndex: false,\n        features: features,\n      }))\n    }\n\n    layer.xhr.send()\n  }\n   \n  layer.L = new ol.layer.Vector({\n    key: layer.key,\n    layer: layer,\n    zIndex: layer.style.zIndex || 10,\n    style: mapp.layer.Style(layer)\n  })\n\n  layer.mapview.Map.getTargetElement().addEventListener('changeEnd', loader)\n}", "const geoJSON = new ol.format.GeoJSON();\n\nexport default layer => {\n\n  layer.reload = loader;\n  \n  function loader () {\n\n    mapp.utils.xhr(\n      `${layer.mapview.host}/api/layer/geojson?${mapp.utils.paramString({\n          locale: layer.mapview.locale.key,\n          layer: layer.key,\n          table: layer.table,\n          filter: layer.filter && layer.filter.current,\n        })}`)\n        .then(response => {\n\n          const features = response.map((f) =>\n            new ol.Feature({\n              id: f.id,\n              geometry: geoJSON.readGeometry(f.geometry, {\n                dataProjection: \"EPSG:\" + layer.srid,\n                featureProjection: \"EPSG:\" + layer.mapview.srid,\n              }),\n              properties: f.properties\n            }))\n\n          let source = new ol.source.Vector({\n            features: features\n          })\n\n          if (layer.clusterSource) {\n\n            source = new ol.source.Cluster({\n              distance: layer.clusterSource.distance || 50,\n              source\n            })\n\n          }\n          \n          layer.L.setSource(source)\n\n        })\n\n  }\n\n  layer.L = new ol.layer[layer.vectorImage && 'VectorImage' || 'Vector']({\n    key: layer.key,\n    zIndex: layer.zIndex || 1,\n    style: layer.styleFunction || mapp.layer.Style(layer)\n  })\n\n}", "export default layer => {\n\n  layer.grid_size = Object.values(layer.grid_fields)[0];\n\n  layer.grid_color = Object.values(layer.grid_fields)[1];\n\n  layer.grid_ratio = false;\n\n  layer.reload = loader\n\n  function loader () {\n\n    if (!layer.display) return;\n\n    if (layer.xhr) layer.xhr.abort();\n\n    const tableZ = layer.tableCurrent();\n\n    if (!tableZ) {\n      layer.L.getSource().clear()\n      return;\n    }\n\n    const extent = ol.proj.transformExtent(\n      layer.mapview.Map.getView().calculateExtent(layer.mapview.Map.getSize()),\n      `EPSG:${layer.mapview.srid}`,\n      `EPSG:${layer.srid}`)\n\n    layer.xhr = new XMLHttpRequest()\n\n    layer.xhr.open(\n      \"GET\",\n      `${layer.mapview.host}/api/layer/grid?` +\n        mapp.utils.paramString({\n          locale: layer.mapview.locale.key,\n          layer: layer.key,\n          table: tableZ,\n          size: layer.grid_size,\n          color: layer.grid_color,\n          viewport: [extent[0], extent[1], extent[2], extent[3]],\n        })\n    );\n\n    layer.xhr.setRequestHeader('Content-Type', 'application/json');\n    layer.xhr.responseType = 'json';\n\n    // Draw layer on load event.\n    layer.xhr.onload = e => {\n\n      if (e.target.status !== 200) return;\n\n      const data = e.target.response;\n    \n      layer.sizeAvg = 0;\n      layer.colorAvg = 0;\n    \n      const dots = data.map(record => {\n    \n        // 0 lat\n        // 1 lon\n        // 2 size\n        // 3 color\n        if (parseFloat(record[2]) > 0) {\n          record[2] = isNaN(record[2]) ? record[2] : parseFloat(record[2]);\n          record[3] = isNaN(record[3]) ? record[3] : parseFloat(record[3]);\n    \n          // Check for grid_ratio\n          if (layer.grid_ratio && record[3] > 0) {\n\n            //console.log(`${record[3]} / ${record[2]}`)\n            record[3] /= record[2]\n          }\n    \n          layer.sizeAvg += parseFloat(record[2]);\n          layer.colorAvg += isNaN(record[3]) ? 0 : parseFloat(record[3]);\n    \n          return new ol.Feature({\n            geometry: new ol.geom.Point(\n              ol.proj.fromLonLat([record[0], record[1]])),\n            properties: {\n              size: parseFloat(record[2]),\n              color: isNaN(record[3]) ? record[3] : parseFloat(record[3])\n            }\n          });\n    \n        }\n      });\n    \n      // Apply maths function to a column in a two dimensional array of numbers.\n      function getMath(arr, idx, type) {\n    \n        // Filter numbers from array column idx.\n        const numbers = arr.filter(n => isFinite(n[idx]));\n    \n        // Apply math function to the filtered numbers array.\n        return Math[type].apply(null, numbers.map(val => val[idx]));\n      }\n    \n      layer.sizeMin = getMath(data, 2, 'min');\n      layer.sizeAvg /= dots.length;\n      layer.sizeMax = getMath(data, 2, 'max');\n    \n      layer.colorMin = getMath(data, 3, 'min');\n      layer.colorAvg /= dots.length;\n      layer.colorMax = getMath(data, 3, 'max');\n    \n      layer.colorBins = [];\n    \n      let n = layer.style.range.length;\n    \n      for (var i = 1; i < n; i++) {\n    \n        if (i < (n / 2)) {\n          layer.colorBins.push(layer.colorMin + ((layer.colorAvg - layer.colorMin) / (n / 2) * i));\n        }\n    \n        if (i === (n / 2)) {\n          layer.colorBins.push(layer.colorAvg);\n        }\n    \n        if (i > (n / 2)) {\n          layer.colorBins.push(layer.colorAvg + ((layer.colorMax - layer.colorAvg) / (n / 2) * (i - (n / 2))));\n        }\n    \n      }\n\n      // source.addFeatures(dots);\n      layer.L.setSource(new ol.source.Vector({\n        useSpatialIndex: false,\n        features: dots,\n      }))\n\n      layer.style.legend?.dispatchEvent(new Event('update'))\n    }\n\n    layer.xhr.send()\n\n  }\n\n  layer.L = new ol.layer.Vector({\n    zIndex: layer.style.zIndex || 1,\n    style: feature => {\n\n      const properties = feature.getProperties().properties;\n\n      // Distribute size between min, avg and max.\n      const size = properties.size <= layer.sizeAvg ?\n        7 + 7 / layer.sizeAvg * properties.size :\n        14 + 7 / (layer.sizeMax - layer.sizeAvg) * (properties.size - layer.sizeAvg);\n\n        // set to no value colour.\n      properties.hxcolor = layer.style.hxcolor || '#C0C0C0';\n\n      if (parseFloat(properties.color)) {\n\n        // set to min colour.\n        properties.hxcolor = layer.style.range[0];\n\n        for (let i = 0; i < layer.colorBins.length; i++) {\n\n          // Break iteration is cat value is below current cat array value.\n          if (properties.color < layer.colorBins[i]) break;\n\n          // Set cat_style to current cat style after value check.\n          properties.hxcolor = layer.style.range[i + 1];\n        }\n\n      }\n\n      return mapp.utils.style({\n        icon: {\n          type: 'dot',\n          fillColor: properties.hxcolor,\n          scale: size / 30\n        }\n      })\n    }\n  })\n\n  layer.mapview.Map.getTargetElement().addEventListener('changeEnd', loader)\n}", "let promise\n\nexport default async layer => {\n\n  if (!promise) promise = new Promise(async resolve => {\n\n    const loader = new google.maps.plugins.loader.Loader({\n      apiKey: layer.apiKey,\n      version: \"weekly\",\n    });\n\n    await loader.load()\n\n    resolve()\n  \n  })\n\n  await promise\n\n  const container = mapp.utils.html.node`\n    <div style=\"position: absolute; width: 100%; height: 100%; transition: opacity .25s ease-in-out;\">`\n\n  layer.gmap = new google.maps.Map(container, {\n    disableDefaultUI: true,\n    keyboardShortcuts: false,\n    draggable: false,\n    disableDoubleClickZoom: true,\n    scrollwheel: false,\n    streetViewControl: false,\n  });\n\n  let timeout, zoom;\n\n  layer.L =  new ol.layer.Layer({\n    zIndex: 0,\n    render: frameState => {\n\n      if (!layer.display) return\n\n      if (zoom !== frameState.viewState.zoom) container.style.opacity = 0;\n\n      zoom = frameState.viewState.zoom\n\n      var center = ol.proj.toLonLat(frameState.viewState.center);\n\n      layer.gmap.setCenter({lat: center[1], lng: center[0]})\n      layer.gmap.setZoom(frameState.viewState.zoom);\n\n      timeout && clearTimeout(timeout)\n\n      timeout = setTimeout(()=>{container.style.opacity = 1;}, 400)\n\n      return container\n    }\n  })\n\n}", "import mbtiles from './mbtiles.mjs'\n\nimport mapboxgl from './mapboxgl.mjs'\n\nimport tiles from './tiles.mjs'\n\nimport mvt from './mvt.mjs'\n\nimport cluster from './cluster.mjs'\n\nimport geojson from './geojson.mjs'\n\nimport grid from './grid.mjs'\n\nimport googlemaps from './googlemaps.mjs'\n\nexport default {\n  mbtiles,\n  mapboxgl,\n  tiles,\n  mvt,\n  cluster,\n  geojson,\n  grid,\n  googlemaps\n}", "import format from './format/_format.mjs'\n\nexport default async layer => {\n  \n  // Assign layer render.\n  format[layer.format] && await format[layer.format](layer)\n  \n  Object.assign(layer, {\n    show,\n    showCallbacks: [],\n    hide,\n    hideCallbacks: [],\n    tableCurrent,\n    tableMax,\n    tableMin,\n    zoomToExtent,\n  })\n\n  // Set layer filter.\n  layer.filter = Object.assign({\n    current: {}\n  }, layer.filter)\n\n  layer.style.opacity && layer.L.setOpacity(layer.style.opacity)\n\n  // Set the first theme from themes array as layer.style.theme\n  if (layer.style && layer.style.themes) {\n\n    layer.style.theme = layer.style.theme\n      || layer.style.themes[Object.keys(layer.style.themes)[0]];\n  }\n\n  // Go through the layer keys to check for plugins.\n  Object.keys(layer).forEach((key) => {\n    mapp.layer[key] && mapp.layer[key](layer)\n    mapp.plugins[key] && mapp.plugins[key](layer);\n  });\n\n  return layer\n}\n\nfunction show() {\n\n  this.display = true\n\n  // Remove OL layer from mapview.\n  this.mapview.Map.removeLayer(this.L)\n\n  // Add OL layer to mapview.\n  this.mapview.Map.addLayer(this.L)\n\n  typeof this.reload === 'function' && this.reload()\n\n  // Add layer attribution to mapview attribution.\n  this.mapview.attribution?.check()\n\n  // Push the layer into the layers hook array.\n  this.mapview.hooks && mapp.hooks.push('layers', this.key)\n\n  // Execute showCallbacks\n  this.showCallbacks?.forEach(fn => typeof fn === 'function' && fn(this))\n}\n\nfunction hide() {\n\n  this.display = false\n\n  // Remove OL layer from mapview.\n  this.mapview.Map.removeLayer(this.L)\n\n  // Remove layer attribution from mapview attribution.\n  this.mapview.attribution?.check()\n\n  // Filter the layer from the layers hook array.\n  this.mapview.hooks && mapp.hooks.filter('layers', this.key)\n\n  // Execute hideCallbacks\n  this.hideCallbacks?.forEach(fn => typeof fn === 'function' && fn(this))\n}\n\nfunction tableCurrent() {\n\n  // A layer must have either a table or tables configuration.\n  if (!this.tables) return this.table\n\n  let\n    table,\n\n    // Get current zoom level from mapview.\n    zoom = parseInt(this.mapview.Map.getView().getZoom()),\n\n\n    // Get zoom level keys from layer.tables object.\n    zoomKeys = Object.keys(this.tables),\n\n    // Get first zoom level key from array.\n    minZoomKey = parseInt(zoomKeys[0]),\n    maxZoomKey = parseInt(zoomKeys[zoomKeys.length - 1])\n     \n  // Get the table for the current zoom level.\n  table = this.tables[zoom]\n\n  // Get the first table if the current zoom level is smaller than the min.\n  table = zoom < minZoomKey ? this.tables[minZoomKey] : table\n\n  // Get the last table if the current zoom level is larger than the max.\n  table = zoom > maxZoomKey ? this.tables[maxZoomKey] : table\n\n  return table\n}\n\nfunction tableMax() {\n\n  // A layer must have either a table or tables configuration.\n  if (!this.tables) return this.table\n\n  // Return first value from (reversed) tables object which is not null.\n  return Object.values(this.tables).reverse().find(val => !!val)\n}\n\nfunction tableMin() {\n\n  // A layer must have either a table or tables configuration.\n  if (!this.tables) return this.table\n\n  // Return first value from tables object which is not null.\n  return Object.values(this.tables).find(val => !!val)\n}\n\nasync function zoomToExtent(params) {\n  \n  let response = await mapp.utils.xhr(`${this.mapview.host}/api/query/layer_extent?`+\n    mapp.utils.paramString({\n      dbs: this.dbs,\n      locale: this.mapview.locale.key,\n      layer: this.key,\n      table: this.table || Object.values(this.tables)[0] || Object.values(this.tables)[1],\n      geom: this.geom,\n      proj: this.srid,\n      srid: this.mapview.srid,\n      filter: this.filter.current\n    }))\n\n  if (!response) {\n    return false;\n  }\n\n  const bounds = /\\((.*?)\\)/.exec(response.box2d)[1].replace(/ /g, ',')\n\n  this.mapview\n    .fitView(bounds.split(',')\n    .map(coords => parseFloat(coords)), params)\n\n  return true;\n}", "export default layer => {\n\n  layer.hover.show = feature => {\n\n    if (!layer.mapview.interaction.current) return;\n\n    // Store current highlight key.\n    let key = layer.mapview.interaction.current.key.toString()\n\n    let paramString = mapp.utils.paramString({\n      dbs: layer.dbs,\n      locale: layer.mapview.locale.key,\n      layer: layer.key,\n      filter: layer.filter?.current,\n      template: layer.hover.query || 'infotip',\n      qID: layer.qID,\n      id: layer.highlight,\n      table: layer.tableCurrent(),\n      geom: layer.geom,\n      field: layer.hover.field,\n      coords: layer.format === 'cluster'\n        && ol.proj.transform(\n          feature.getGeometry().getCoordinates(),\n          `EPSG:${layer.mapview.srid}`,\n          `EPSG:${layer.srid}`)\n    })\n\n    mapp.utils.xhr(`${layer.mapview.host}/api/query?${paramString}`)\n      .then(response => {\n\n        // Check whether highlight feature is still current.\n        if(layer.mapview.interaction?.current?.key !== key) return;\n\n        // Check whether cursor has position (in map).\n        if (!layer.mapview.position) return;\n\n        // Check whether there is a response to display.\n        if (!response) return;\n\n        // Check whether the response label field has a value.\n        if (response.label == '') return;\n\n        // Display the response label as infotip.\n        layer.mapview.infotip(response.label)\n      })\n  }\n\n}", "export default layer => feature => {\n\n  feature.properties = feature.getProperties()\n\n  // Geojson feature have a properties property\n  if (feature.properties.properties) {\n\n    Object.assign(feature.properties, feature.properties.properties)\n    delete feature.properties.properties\n  }\n\n  // Assign properties.count from length of cluster layer features array.\n  if (layer.type === 'cluster') {\n\n    feature.properties.count = feature.get('features').length\n  }\n\n  // The featureLookup is an array of features\n  if (layer.featureLookup) {\n\n    // Find feature with matching ID property in the featureLookup\n    const lookupFeature = layer.featureLookup.find(f=> f[layer.featureLookupId || 'id'] === feature.properties.id)\n\n    // Do not style features not found in the lookup array.\n    if (!lookupFeature) return;\n\n    // Assign feature.properties from the lookupFeature for subsequent styling\n    Object.assign(feature.properties, lookupFeature)\n  }\n  \n  // Assign feature style\n  feature.style =  Object.assign({},\n    layer.style.default,\n\n    // Assign cluster style\n    feature.properties.count && feature.properties.count > 1 && layer.style.cluster || {},\n\n    // Assign theme style\n    layer.style.theme?.style || {})\n\n  feature.geometryType = feature.getGeometry().getType()\n\n  // Point features must have a style.icon\n  if (feature.geometryType === 'Point') {\n\n    // WARN!\n    feature.style.marker && console.warn('style.marker will be removed in v4 release. please use style.icon')\n\n    // The style must be cloned as icon if not otherwise defined to prevent circular reference\n    feature.style.icon = Object.assign({}, feature.style.icon || mapp.utils.clone(feature.style))\n\n  } else {\n\n    // Other geometry types must not have a style.icon.\n    delete feature.style.icon\n  }\n\n  // Scale are only valid within style.icon\n  delete feature.style.scale\n  delete feature.style.clusterScale\n\n  // Apply theme style to style object.\n  mapp.layer.themes[layer.style.theme?.type] && mapp.layer.themes[layer.style.theme.type](layer.style.theme, feature)\n\n  // Cluster icons will NOT scale different to single locations if the clusterScale is not set in the cluster style.\n  if (feature.style.icon?.clusterScale) {\n\n    // The clusterScale will be added to the icon scale.\n    feature.style.icon.clusterScale = layer.style.logScale ?\n\n      // A natural log will be applied to the cluster scaling.\n      Math.log(feature.style.icon.clusterScale) / Math.log(layer.max_size) * Math.log(feature.properties.size || feature.properties.count) :\n\n      // A fraction of the icon clusterScale will be added to the items scale for all but the biggest cluster location.\n      1 + (feature.style.icon.clusterScale / layer.max_size * (feature.properties.size || feature.properties.count))\n  }\n\n  // Setting a zoomInScale will INCREASE the scale of icons on higher zoom levels.\n  if (feature.style.icon?.zoomInScale) {\n\n    feature.style.icon.zoomInScale *= layer.mapview.Map.getView().getZoom()\n  }\n\n  // Setting a zoomOutScale will DECREASE the scale of icons on higher zoom levels.\n  if (feature.style.icon?.zoomOutScale) {\n\n    feature.style.icon.zoomOutScale /= layer.mapview.Map.getView().getZoom()\n  }\n\n  const featureID = feature.get('id') || feature.getId()\n\n  // Apply highlight style to features which are highlighted.\n  if (layer.highlight && layer.highlight === featureID){\n\n    const highlightStyle = mapp.utils.clone(layer.style.highlight)\n\n    if (feature.geometryType === 'Point') {\n\n      // The highlightStyle must be cloned as icon if not otherwise defined to prevent circular reference\n      highlightStyle.icon = highlightStyle.icon || highlightStyle.marker || mapp.utils.clone(highlightStyle)\n\n      highlightStyle.icon.highlightScale = highlightStyle.icon.scale || 1\n\n      // Remove scales to prevent assignment of highlight scale to the icon's base scale\n      delete highlightStyle.icon.scale\n      delete highlightStyle.scale\n    } else {\n\n      // Delete icon from highlight style if feature is not a point.\n      delete highlightStyle.icon\n    }\n\n    mapp.utils.merge(feature.style, highlightStyle)\n  }\n\n  // Assign label style.\n  if (layer.style.label?.display) {\n\n    // Merge layer label style into feature.style.\n    mapp.utils.merge(feature.style, {label: layer.style.label})\n\n    feature.style.label.text =\n      (feature.style.label.count && feature.properties.count > 1 && feature.properties.count)\n      || feature.properties.label;\n\n    // Delete style.label if minZoom exceeds current zoom.\n    feature.style.label?.minZoom > layer.mapview.Map.getView().getZoom() && delete feature.style.label;\n\n    // Delere style.label if current zoom exceeds maxZoom.\n    feature.style.label?.maxZoom < layer.mapview.Map.getView().getZoom() && delete feature.style.label;\n  }\n\n  // Check whether the feature referenced in mapview.locations\n  if (layer.mapview?.locations[`${layer.key}!${feature.properties.id}`]) {\n\n    layer.style.selected &&\n      mapp.utils.merge(feature.style, layer.style.selected, {\n        zIndex: Infinity,\n      });\n\n    if (layer.style.selected === null) return;\n  }\n\n  return mapp.utils.style(feature.style, feature)\n}", "export default function(theme, feature) {\n\n  var catValue = feature.properties.cat || feature.properties[theme.field]\n\n  var catStyle = theme.cat && (theme.cat[catValue]?.style || theme.cat[catValue])\n\n  if (catValue && typeof catStyle === 'undefined') {\n\n    var entry = Object.values(theme.cat)\n      .filter(entry => Array.isArray(entry.keys))\n      .find(entry => entry.keys.includes(catValue))\n\n    var catStyle = mapp.utils.clone(entry?.style || entry)\n\n    catStyle && delete catStyle.label\n  }\n\n  if (typeof catStyle !== 'undefined') {\n\n    // WARN!\n    catStyle.marker && console.warn('style.marker will be removed in v4 release. please use style.icon')\n\n    // Assign icon style from the marker value or the clone the style object as icon if no marker or icon has been defined.\n    catStyle.icon = feature.geometryType === 'Point' && mapp.utils.clone(catStyle.icon || catStyle)\n\n    delete catStyle.label\n\n    mapp.utils.merge(feature.style, catStyle)\n  }\n}", "export default function(theme, feature) {\n\n  if (!theme.lookup) {\n\n    theme.lookup = {}\n    theme.boxes = []\n    theme.index = 0\n\n    // test layer for visual check.\n    // theme.source = new ol.source.Vector({\n    //   useSpatialIndex: false\n    // })\n    // theme.L = new ol.layer.Vector({\n    //   source: theme.source\n    // })\n    // layer.mapview.Map.addLayer(theme.L)\n  }\n\n  // The feature field property value already has a style assigned.\n  if (theme.lookup[feature.properties[theme.field]]) {\n\n    // Assign style from lookup object.\n    var catStyle = theme.lookup[feature.properties[theme.field]]\n    mapp.utils.merge(feature.style, catStyle)\n    return;\n  }\n\n  // Get feature bounding box from geometry extent.\n  let bbox = {\n    extent: feature.getGeometry().getExtent()\n  }\n\n  // add box to visual check layer.\n  // theme.source.addFeature(new ol.Feature(new ol.geom.Polygon.fromExtent(bbox.extent)))\n\n  // Find intersecting bounding boxes with their assigned cat index.\n  let intersects = theme.boxes.filter(b => !(bbox.extent[0] > b.extent[2]\n    || bbox.extent[2] < b.extent[0]\n    || bbox.extent[1] > b.extent[3]\n    || bbox.extent[3] < b.extent[1]))\n\n  // Push the current bbox into the array.\n  theme.boxes.push(bbox)\n\n  // Create a set of cat indices from intersecting bounding boxes.\n  let set = new Set(intersects.map(b => b.themeIdx))\n\n  // Increase the cat indix.\n  theme.index++\n\n  // Reset cat index to 0 if the index reaches the length of the cat array.\n  if (theme.index === theme.cat_arr.length) theme.index = 0\n\n  // Check whether the set of intersecting bounding boxes has NOT the cat index.\n  let i = !(set.has(theme.index)) && parseInt(theme.index)\n\n  // Index is not available.\n  if (i === false) {\n\n    // Iterate through the cat array.\n    for (let free = 0; free < theme.cat_arr.length; free++) {\n\n      if (!set.has(free)) {\n\n        // Assign free index and break loop.\n        i = free;\n        break;\n      }\n    }\n  }\n\n  // No index is available.\n  if (i === false) {\n\n    // Assign cat index.\n    i = parseInt(theme.index)\n  }\n\n  // Assign index to the bounding box which is stored in the array of bounding boxes.\n  bbox.themeIdx = i\n\n  // Get the JSON style from cat array via index.\n  var catStyle = theme.cat_arr[i]\n\n  // Assign the JSON style to the lookup object for the feature field property value.\n  theme.lookup[feature.properties[theme.field]] = catStyle\n\n  // Merge the cat style with the feature style.\n  mapp.utils.merge(feature.style, catStyle)\n}", "export default function(theme, feature) {\n\n  var catValue = parseFloat(feature.properties.cat || feature.properties[theme.field])\n\n  if (!isNaN(catValue)) {\n\n    // Iterate through cat array.\n    for (let i = 0; i < theme.cat_arr.length; i++) {\n\n      // Break iteration is cat value is below current cat array value.\n      if (catValue < parseFloat(theme.cat_arr[i].value)) break;\n\n      // Set cat_style to current cat style after value check.\n      var catStyle = mapp.utils.clone(theme.cat_arr[i].style || theme.cat_arr[i])\n\n      delete catStyle.label\n    }\n\n    if (catStyle) {\n\n      // WARN!\n      catStyle.marker && console.warn('style.marker will be removed in v4 release. please use style.icon')\n\n      // Assign icon style from thparams.fillOpacity || 1e marker value or the clone the style object as icon if no marker or icon has been defined.\n      catStyle.icon = feature.geometryType === 'Point' && mapp.utils.clone(catStyle.icon || catStyle)\n\n      delete catStyle.label\n\n      mapp.utils.merge(feature.style, catStyle)\n    }\n  }\n}", "import decorate from './decorate.mjs'\n\nimport hover from './hover.mjs'\n\nimport Style from './Style.mjs'\n\nimport categorized from './themes/categorized.mjs'\n\nimport distributed from './themes/distributed.mjs'\n\nimport graduated from './themes/graduated.mjs'\n\nexport default {\n  decorate,\n  hover,\n  Style,\n  themes: {\n    categorized,\n    distributed,\n    graduated\n  }\n}", "export default location => {\n\n  Object.assign(location, {\n    flyTo,\n    Layers: [],\n    remove,\n    removeCallbacks: [],\n    trash,\n    update,\n    updateCallbacks: [],\n  })\n\n  return location;\n}\n\nfunction remove() {\n\n  // Checks may be performed after async oprations\n  // whether a location has already been removed.\n  delete this.remove\n\n  this.layer.mapview.hooks && mapp.hooks.filter('locations', this.hook)\n\n  delete this.layer.mapview.locations[this.hook]\n\n  this.view instanceof HTMLElement && this.view.remove()\n\n  this.Layers?.forEach(\n    L => this.layer.mapview.Map.removeLayer(L))\n\n  this.layer.mapview.interaction.type !== 'highlight'\n    && this.layer.mapview.interactions.highlight()\n\n  if (this.layer.format === 'mvt') {\n\n    this.layer.L.changed()\n  } else {\n\n    this.layer.reload && this.layer.reload()\n  } \n\n  this.removeCallbacks?.forEach(\n    fn => typeof fn === 'function' && fn(this))\n}\n\nasync function update() {\n\n  const newValues = {}\n\n  this.infoj\n    .filter(entry => typeof entry.newValue !== 'undefined')\n    .forEach(entry => {\n\n      if(entry.type === 'integer') entry\n        .newValue = !isNaN(parseInt(entry.newValue)) ? entry.newValue : null;\n\n      if(entry.type === 'numeric') entry\n        .newValue = !isNaN(parseFloat(entry.newValue)) ? entry.newValue : null;\n           \n      Object.assign(newValues, { [entry.field] : entry.newValue })\n    })\n\n  if (!Object.keys(newValues).length) return;\n\n  await mapp.utils.xhr({\n    method: \"POST\",\n    url:\n      `${this.layer.mapview.host}/api/location/update?` +\n      mapp.utils.paramString({\n        locale: this.layer.mapview.locale.key,\n        layer: this.layer.key,\n        table: this.table,\n        id: this.id,\n      }),\n    body: JSON.stringify(newValues),\n  });\n   \n  let dependents = this.infoj\n    .filter(entry => typeof entry.newValue !== 'undefined')\n    .filter(entry => entry.dependents && entry.dependents.length)\n    .map(entry => entry.dependents)\n    .flat()\n\n  this.infoj\n    .filter(entry => typeof entry.newValue !== 'undefined')\n    .forEach(entry => {\n\n      entry.value = entry.newValue;\n      delete entry.newValue;\n\n    })\n\n  if (dependents.length) {\n\n    const response = await mapp.utils.xhr(\n      `${this.layer.mapview.host}/api/location/get?` +\n        mapp.utils.paramString({\n          locale: this.layer.mapview.locale.key,\n          layer: this.layer.key,\n          table: this.table,\n          id: this.id,\n          fields: [...new Set(dependents)].join(),\n        })\n    );\n\n    this.infoj\n      .filter(entry => typeof response[entry.field] !== 'undefined')\n      .forEach(entry => {\n        entry.value = response[entry.field];\n      })\n  \n  }\n\n  // Reload layer.\n  this.layer.reload()\n\n  this.updateCallbacks?.forEach(\n    fn => typeof fn === 'function' && fn(this))\n}\n\nfunction flyTo () {\n\n  const sourceVector = new ol.source.Vector();\n\n  this.Layers.forEach(layer => {\n\n    const source = layer.getSource()\n\n    typeof source.getFeatures === 'function'\n      && sourceVector.addFeatures(source.getFeatures())\n  })\n\n  this.layer.mapview.fitView(sourceVector.getExtent());\n}\n\nasync function trash() {\n\n  if(!confirm(mapp.dictionary.confirm_delete)) return;\n\n  await mapp.utils.xhr(`${this.layer.mapview.host}/api/location/delete?` +\n    mapp.utils.paramString({\n      locale: this.layer.mapview.locale.key,\n      layer: this.layer.key,\n      table: this.table,\n      id: this.id\n    }))\n\n  this.layer.reload()\n\n  this.remove()\n}", "export default async function (location, list = location.layer.mapview.locations) {\n\n  if (!location.layer || !location.id) return;\n\n  // Create location hook.\n  location.hook = `${location.layer.key}!${location.id}`;\n\n  // Return if hook exists in mapview.interaction.locations set.\n  if (location.layer.mapview.interaction?.locations?.has(location.hook)) return;\n\n  // Add hook to mapview.interaction.locations set.\n  location.layer.mapview.interaction?.locations?.add(location.hook)\n\n  // Remove location if already in list.\n  if (list[location.hook]) {\n    list[location.hook].remove()\n    delete list[location.hook]\n\n    // Remove hook to mapview.interaction.locations set.\n    location.layer.mapview.interaction?.locations?.delete(location.hook)\n    return;\n  }\n\n  // Get dbs table from layer.\n  location.table = location.table\n    || location.layer.table\n    || Object.values(location.layer.tables).find(table => !!table)\n\n  // Get data from location api.\n  const response = await mapp.utils.xhr(\n    `${location.layer.mapview.host}/api/location/get?` +\n    mapp.utils.paramString({\n      locale: location.layer.mapview.locale.key,\n      layer: location.layer.key,\n      table: location.table,\n      id: location.id,\n    })\n  );\n\n  if (!response) {\n\n    console.log('No data returned from location get request')\n    mapp.hooks.filter('locations', location.hook)\n    return;\n  }\n\n  const infoj = location.layer.infoj.map(_entry => {\n\n    const entry = mapp.utils.clone(_entry)\n\n    Object.assign(entry, {\n      title: response[entry.field + '_label'] || entry.title,\n      value: response[entry.field],\n      location\n    })\n\n    return entry\n  })\n\n  mapp.location.decorate(Object.assign(location, { infoj }))\n\n  // Assign location to mapview.\n  list[location.hook] = location\n\n  // Remove hook to mapview.interaction.locations set.\n  location.layer.mapview.interaction?.locations?.delete(location.hook)\n\n  // Push location hook to URL if hooks are enabled for the mapview.\n  location.layer.mapview.hooks && mapp.hooks.push('locations', location.hook)\n\n  return location\n}", "export default async function (params) {\n\n  let\n    properties = params.feature.getProperties(),\n    geom = params.feature.getGeometry(),\n    _coords = geom.getCoordinates(),\n    coords = ol.proj.transform(\n      _coords,\n      'EPSG:' + params.mapview.srid,\n      'EPSG:' + params.layer.srid)\n\n  const response = await mapp.utils.xhr(\n    `${params.mapview.host}/api/query/get_nnearest?` +\n      mapp.utils.paramString({\n        locale: params.mapview.locale.key,\n        layer: params.layer.key,\n        geom: params.layer.geom,\n        qID: params.layer.qID,\n        cluster_label: params.layer.cluster_label || params.layer.qID,\n        table: params.table,\n        filter: params.layer.filter?.current,\n        n: properties.count > (params.max || 99) ? (params.max || 99) : properties.count,\n        x: coords[0],\n        y: coords[1],\n        coords: coords,\n      })\n  );\n\n  const list = mapp.utils.html.node`\n    <div style=\"max-width: 66vw; max-height: 300px; overflow-x: hidden;\">\n      <ul>\n      ${response.map(li => mapp.utils.html.node`\n        <li\n          onclick=${e => {\n            params.mapview.popup(null)\n            mapp.location.get({\n              //mapview: params.mapview,\n              layer: params.layer,\n              table: params.table,\n              id: li.id,\n              marker: ol.proj.transform(\n                li.coords,\n                'EPSG:' + params.layer.srid,\n                'EPSG:' + params.mapview.srid),\n            })\n          }}>${li.label || '\"' + params.layer.cluster_label + '\"'}`)}`;\n\n  params.mapview.popup({\n    coords: ol.proj.transform(\n      coords,\n      \"EPSG:\" + params.layer.srid,\n      \"EPSG:\" + params.mapview.srid\n    ),\n    content: list,\n    autoPan: true,\n  });\n\n}", "import decorate from './decorate.mjs'\n\nimport get from './get.mjs'\n\nimport nnearest from './nnearest.mjs'\n\nexport default {\n  decorate,\n  get,\n  nnearest,\n}", "export default async function (layers) {\n\n  if (!Array.isArray(layers)) return;\n\n  let hooks = (this.hooks && mapp.hooks.current.layers.length)\n\n  for (let _layer of layers) {\n\n    let layer = mapp.utils.clone(_layer);\n\n    layer.mapview = this\n\n    if (hooks) {\n      layer.display = !!~mapp.hooks.current.layers.indexOf(layer.key)\n    }\n\n    await mapp.layer.decorate(layer)\n\n    this.layers[layer.key] = layer\n\n    layer.display && layer.show()\n  }\n\n  return layers\n}", "export default function (extent, opt_options = {}){\n  this.Map.getView().fit(\n    extent,\n    Object.assign(\n      {\n        padding: [50, 50, 50, 50],\n        duration: 1000\n      },\n      opt_options)\n  )\n}", "export default function(srid){\n\n  const extent = this.Map.getView().calculateExtent();\n\n  if (!srid) return {\n    south: extent[1],\n    west: extent[0],\n    north: extent[3],\n    east: extent[2],\n  };\n\n  const extent_transformed = ol.proj.transformExtent(\n    extent,\n    `EPSG:${this.srid}`,\n    `EPSG:${srid}`);\n\n  return {\n    south: extent_transformed[1],\n    west: extent_transformed[0],\n    north: extent_transformed[3],\n    east: extent_transformed[2],\n  }\n}", "const geoJSON = new ol.format.GeoJSON();\n\nexport default function (params){\n\n  const feature = params.geometry && geoJSON.readFeature({\n    type: 'Feature',\n    geometry: params.geometry\n  },{ \n    dataProjection: `EPSG:${params.dataProjection || this.srid}`,\n    featureProjection:`EPSG:${this.srid}`\n  });\n\n  const sourceVector = new ol.source.Vector()\n\n  feature && sourceVector.addFeature(feature)\n  \n  const layerVector = new ol.layer.Vector({\n    source: sourceVector,\n    zIndex: params.zIndex,\n    style: params.Style\n  })\n  \n  this.Map.addLayer(layerVector)\n  \n  return layerVector\n}", "const infotip = {}\n\nexport default function(content) {\n\n  const mapview = this;\n\n  // Remove infotip node element\n  infotip.node?.remove()\n\n  // Remove infotip positioning event from mapview Map.\n  mapview.Map.un('pointermove', position)\n\n  // Just clears the infotip.\n  if (!content) return;\n\n  // Creates the infotip node.\n  infotip.node = mapp.utils.html.node`<div class=\"infotip box-shadow\">`\n\n  // Assigns the infotip content.\n  infotip.node.innerHTML = content\n\n  // Appends the infotip to the mapview.Map.\n  mapview.Map.getTargetElement().appendChild(infotip.node)\n\n  // Assign infotip positioning event to mapview.Map.\n  mapview.Map.on('pointermove', position)\n\n  // Set the position of the infotip.\n  position()\n\n  function position() {\n\n    // The infotip class has a default opacity of 0, with transition effect.\n    infotip.node.style.opacity = 1;\n\n    // Set the infotip position from mapview pointerLocation.\n    infotip.node.style.left = mapview.pointerLocation.x - infotip.node.offsetWidth / 2 + 'px'\n    infotip.node.style.top = mapview.pointerLocation.y - infotip.node.offsetHeight - 15 + 'px'\n  }\n\n}", "export default function (params) {\n\n  this._locate = this._locate || Object.assign({\n    icon: {\n      svg: `${this.host}/icons/locator.svg`,\n      scale: 0.05\n    },\n    feature: new ol.Feature({\n      geometry: new ol.geom.Point([0, 0])\n    }),\n  }, params || {})\n\n  this._locate.active = !this._locate.active\n\n  // Create the geolocation marker if it doesn't exist yet.\n  if (!this._locate.L) {\n\n    this._locate.L = new ol.layer.Vector({\n      source: new ol.source.Vector({\n        features: [this._locate.feature]\n      }),\n      zIndex: 999,\n      style: mapp.utils.style({\n        icon: this._locate.icon\n      })\n    })\n  }\n\n  // Remove the geolocation marker if locate is not active.\n  if (!this._locate.active) {\n    this.Map.removeLayer(this._locate.L)\n    return;\n  }\n\n  this.Map.addLayer(this._locate.L)\n\n  mapp.utils.getCurrentPosition((pos) => {\n\n    const coords = ol.proj.fromLonLat([\n      parseFloat(pos.coords.longitude),\n      parseFloat(pos.coords.latitude)\n    ])\n\n    this._locate.feature.getGeometry().setCoordinates(coords)\n\n    // Fly to pos_ll and set flyTo to false to prevent map tracking.\n    this.Map.getView().animate({\n      center: coords,\n      zoom: this.locale.maxZoom\n    })\n  })\n\n}", "const popup = {}\n\nexport default function(params) {\n\n  const mapview = this;\n\n  // Remove infotip node element\n  popup.node?.remove()\n\n  // Just clears the infotip.\n  if (!params) return;\n\n  popup.node = mapp.utils.html.node `<div class=\"popup box-shadow\">`\n\n  popup.node.appendChild(params.content)\n  \n  popup.overlay && mapview.Map.removeOverlay(popup.overlay)\n\n  popup.overlay = new ol.Overlay({\n    element: popup.node,\n    position: params.coords || mapview.position,\n    positioning: 'bottom-center',\n    autoPan: params.autoPan,\n    insertFirst: true,\n    autoPanAnimation: {\n      duration: 250\n    }\n  })\n\n  mapview.Map.addOverlay(popup.overlay)\n\n}", "let \n  snapSource,\n  snapLayer,\n  vectorTileSource,\n  vectorTileLayer,\n  snapInteraction;\n\nexport default function(interaction) {\n\n  // this = mapview\n\n  if (interaction === null) {\n    \n    // Remove snapInteraction\n    this.Map.removeInteraction(snapInteraction)\n\n    // Unassign tileloadend event from vectorTileSource\n    vectorTileSource && vectorTileSource.un('tileloadend', tileloadend);\n\n    // Remove vectorTileLayer from map.\n    vectorTileLayer && this.Map.removeLayer(vectorTileLayer)\n\n    vectorTileLayer = null\n\n    // Remove invisible snapLayer from map.\n    this.Map.removeLayer(snapLayer)\n\n    return;\n  }\n\n  // Either a snapSource or snapLayer are required.\n  if (!interaction.snapSource && !interaction.snapLayer) return;\n\n  // Assign snapSource from interaction or create new.\n  snapSource = interaction.snapSource || new ol.source.Vector()\n\n  // Create snapLayer from snapSource.\n  snapLayer = new ol.layer.Vector({\n    source: snapSource,\n    opacity: 0\n  })\n\n  // Add snapLayer to map.\n  this.Map.addLayer(snapLayer)\n\n  // The interaction.snapLayer has a snapSource (MVT only)\n  if (interaction.snapLayer?.snapSource) {\n\n    vectorTileSource = interaction.snapLayer.snapSource\n\n    // Assign event to load vector features from vectorTileSource into snapSource.\n    vectorTileSource.on('tileloadend', tileloadend)\n\n    // Create vectorTileLayer from vectorTileSource\n    vectorTileLayer = new ol.layer.VectorTile({\n      source: vectorTileSource,\n      opacity: 0\n    })\n  \n    // Add vectorTileLayer to map and refresh source.\n    this.Map.addLayer(vectorTileLayer)\n\n    vectorTileSource.refresh()\n\n  } else if (interaction.snapLayer){\n\n    // Assign snapSource from the snapLayer's OL source.\n    snapSource = interaction.snapLayer.L.getSource()\n  }\n\n  // Create and assign snap interaction.\n  snapInteraction = new ol.interaction.Snap({\n    source: snapSource\n  })\n\n  this.Map.addInteraction(snapInteraction)\n}\n\nfunction tileloadend(evt){\n  snapSource.addFeatures(evt.tile.getFeatures())\n}", "export default function(params){\n\n  const mapview = this\n\n  // Finish the current interaction.\n  // Only one interaction can be current.\n  mapview.interaction?.finish()\n\n  const interaction = Object.assign({\n    type: 'highlight',\n    finish,\n    clear,\n    highlight,\n    getLocation,\n    hitTolerance: 5,\n    candidates: {},\n    candidateKeys: new Set(),\n    locations: new Set(),\n\n    // Filter for layers which have a highlight style.\n    layerFilter: L => Object.values(mapview.layers)\n\n      // layer L matching the feature layer L must have a qID defined\n      .some(layer => layer.qID && layer.L === L)\n  }, params)\n\n  // Assign highlight to be the current interaction.\n  mapview.interaction = interaction\n\n  // pointerMove will highlight features.\n  mapview.Map.on('pointermove', pointerMove)\n\n  // click will select the highlighted feature.\n  mapview.Map.on('click', click)\n\n  // Reset cursor.\n  mapview.Map.getTargetElement().style.cursor = 'auto'\n\n  let shortCircuit\n\n  function pointerMove(e) {\n\n    // Method should short circuit if still processing.\n    if (shortCircuit) return;\n\n    // Set shortCircuit flag.\n    shortCircuit = true;\n\n    let candidates = {};\n\n    mapview.Map.forEachFeatureAtPixel(e.pixel,\n      (F, L) => {\n\n        // Create candidate object.\n        let candidate = {\n          key: `${L.get('key') || ol.util.getUid(L)}!${F.get('id') || F.getId() || ol.util.getUid(F)}`,\n          F, L\n        }\n\n        // Assign to key in candidates object.\n        candidates[candidate.key] = candidate\n      },\n      {\n        layerFilter: interaction.layerFilter,\n        hitTolerance: interaction.hitTolerance,\n      })\n\n    // No features at pixel.\n    if (!Object.keys(candidates).length) {\n\n      // Reset candidateKeys\n      interaction.candidateKeys = new Set();\n\n      // Remove shortCircuit flag.\n      shortCircuit = false;\n\n      // Clear highlight.\n      clear();\n\n      // There is nothing to highlight.\n      return;\n    }\n\n    // Check whether set of candidate keys is equal to interaction.candidateKeys\n    if (mapp.utils.areSetsEqual(interaction.candidateKeys, new Set(Object.keys(candidates)))) {\n\n      // Remove shortCircuit flag\n      shortCircuit = false;\n\n      // The highlight hasn't changed.\n      return;\n    }\n\n    // Find candidate from key which is not in candidates set.\n    let candidate = candidates[Object.keys(candidates).find(key => !interaction.candidateKeys.has(key))]\n\n    // Assign candidate from first key if candidate is falsy.\n    candidate = candidate\n      || interaction.current?.key && candidates[interaction.current?.key]\n      || candidates[Object.keys(candidates)[0]]\n\n    // Assign new Set of candidate keys to interaction.\n    interaction.candidateKeys = new Set(Object.keys(candidates))\n\n    // Remove shortCircuit flag.\n    shortCircuit = false;\n\n    // Call highlight method.\n    interaction.highlight(candidate, e)\n  }\n\n  function highlight(feature, e) {\n\n    // Highlight method should only be called if the highlight has changed.\n    clear()\n\n    // Assign the layer and ID to the candidate object.\n    interaction.current = Object.assign(feature, {\n      layer: mapview.layers[feature.L.get('key')],\n      id: feature.F.get('id') || feature.F.getId()\n    })\n\n    // Assign the id to the layer highlight key.\n    // Required to determine in the style function whether the current feature should be styled as highlighted.\n    interaction.current.layer.highlight = feature.id\n\n    // Touch events should not highlight features since there is no cursor.\n    if (e.originalEvent.pointerType !== 'mouse') {\n\n      // Don't get location from touch pan or zoom pinch event.\n      e.type !== 'pointermove' && interaction.getLocation(interaction.current)\n\n      // Clear touch highlight.\n      clear()\n\n      return;\n    }\n\n    // Change cursor if the highlight is selectable.\n    if (interaction.current.layer.infoj) mapview.Map.getTargetElement().style.cursor = 'pointer'\n\n    // Execute any hover method assigned to the current feature layer.\n    typeof interaction.current.layer.hover?.show === 'function' && interaction.current.layer.hover.show(feature.F)\n\n    // Style the feature itself if possible.\n    if (interaction.current.layer.format !== 'mvt'\n      && typeof interaction.current.F.setStyle === 'function') {\n\n      feature.F.set('highlight', true)\n      interaction.current.F.setStyle()\n\n    } else if (interaction.current.layer.style.highlight) {\n\n      // Render unto canvas those things that are canvas'\n      interaction.current.layer.L.changed()\n    }\n  }\n\n  let clicked;\n\n  // Select the current highlighted feature.\n  function click(e) {\n\n    // Limit click event to 600ms\n    if (clicked) return;\n    clicked = setTimeout(() => { clicked = null }, 600);\n\n    // There is no current highlighted feature without pointerMove.\n    // Simulate pointermove on the touch click coordinates.\n    if (e.originalEvent.pointerType === 'touch') {\n\n      interaction.candidateKeys = new Set();\n      e.type = 'touchClick'\n      pointerMove(e)\n      return\n    }\n    \n    // Remove any existing popup. e.g. Cluster select dialogue.\n    mapview.popup(null)\n\n    // Return if there is no current highlight to select.\n    interaction.current && interaction.getLocation(interaction.current)\n  }\n\n  function clear() {\n\n    // Highlight has already been cleared.\n    if (!interaction.current) return;\n\n    // Remove any infotip.\n    mapview.infotip(null)\n\n    // Reset cursor.\n    mapview.Map.getTargetElement().style.cursor = 'auto'\n\n    // Delete the highlight id from current layer.\n    delete interaction.current.layer.highlight\n\n    // Style the feature itself if possible.\n    if (interaction.current.layer.format !== 'mvt'\n      && typeof interaction.current.F.setStyle === 'function') {\n\n      interaction.current.F.set('highlight', false)\n      interaction.current.F.setStyle()\n\n    } else if (interaction.current.layer.style.highlight) {\n\n      // Render unto canvas those things that are canvas'\n      interaction.current.layer.L.changed()\n    }\n\n    // Delete the current highlight object.\n    delete interaction.current\n  }\n\n  function getLocation(feature) {\n\n    if (!feature.layer.infoj) return;\n\n    // Get the properties of the current highlight feature.\n    const properties = feature.F.getProperties()\n\n    // Return with a select dialogue for cluster feature.\n    if (properties.count > 1) {\n      mapp.location.nnearest({\n        mapview,\n        layer: feature.layer,\n        table: feature.layer.table || feature.layer.tableCurrent(),\n        feature: feature.F\n      })\n      return;\n    }\n\n    // Select the current highlight feature.\n    mapp.location.get({\n      layer: feature.layer,\n      table: feature.layer.table || feature.layer.tableCurrent(),\n      id: feature.layer.highlight\n    })\n  }\n\n  // Finished the highlight interaction.\n  function finish() {\n\n    delete mapview.interaction\n\n    // Remove popup from mapview.\n    mapview.popup(null)\n\n    // Remove event listener from mapview.\n    mapview.Map.un('pointermove', pointerMove)\n    mapview.Map.un('click', click)\n  }\n}", "export default function(params){\n\n  // Assign params to the interaction object.\n  const draw = Object.assign({\n\n    // Interaction methods are bound to the mapview.\n    mapview: this,\n\n    srid: this.srid,\n\n    type: 'draw',\n\n    finish,\n\n    getFeature,\n  \n    format: new ol.format.GeoJSON(),\n  \n    Layer: new ol.layer.Vector({\n      source: new ol.source.Vector()\n    }),\n\n    // Bind context menu from mapp ui elements.\n    contextMenu: mapp.ui?.elements.contextMenu.draw.bind(this),\n\n    vertices: [],\n  \n    style: [\n      new ol.style.Style({\n        image: new ol.style.Circle({\n          stroke: new ol.style.Stroke({\n            color: '#3399CC',\n            width: 1.25\n          }),\n          radius: 5\n        }),\n        stroke: new ol.style.Stroke({\n          color: '#3399CC',\n          width: 1.25\n        })\n      }),\n      new ol.style.Style({\n        image: new ol.style.Circle({\n          radius: 5,\n          fill: new ol.style.Fill({\n            color: '#eee',\n          }),\n          stroke: new ol.style.Stroke({\n            color: '#3399CC',\n            width: 1.25\n          })\n        }),\n        geometry: mapp.utils.verticeGeoms\n      })\n    ]\n  }, params)\n\n  // Finish the current interaction.\n  draw.mapview.interaction?.finish()\n  \n  // Change cursor style for mapview element.\n  draw.mapview.Map.getTargetElement().style.cursor = 'crosshair'\n  \n  // Add draw layer to mapview.\n  draw.mapview.Map.addLayer(draw.Layer)\n  \n  // Create OL draw interaction.\n  draw.interaction = new ol.interaction.Draw({\n    source: draw.Layer.getSource(),\n    geometryFunction: draw.geometryFunction,\n    freehand: draw.freehand,\n    type: draw.type,\n    style: draw.style,\n    condition: e => {\n\n      // A vertice may not be set if kinks were detected on the geometry.\n      if (draw.kinks) return false;\n\n      if (e.originalEvent.buttons === 1) {\n        draw.vertices.push(e.coordinate);\n        draw.mapview.popup(null);\n        \n        draw.conditions?.forEach(fn => typeof fn === 'function' && fn(e))\n        typeof draw.condition === 'function' && draw.condition(e)\n        return true;\n      }\n    }\n  })\n\n  // Set drawstart event method.\n  draw.interaction.on('drawstart', e => {\n\n    const geometry = e.feature.getGeometry()\n\n    async function onChange() {\n      draw.mapview.popup({\n        content: mapp.utils.html.node`\n          <div style=\"padding: 5px\">${await mapp.utils.convert(draw.mapview.metrics[draw.tooltip.metric](geometry), draw.tooltip)}`\n      })\n    }\n\n    draw.tooltip && geometry.on('change', draw.tooltip.onChange || onChange)\n\n    e.feature.setStyle(draw.style)\n\n    draw.Layer.getSource().clear()\n\n    draw.mapview.popup(null)\n  })\n  \n  draw.interaction.on('drawend', e => {\n\n    //draw.freehand && draw.vertices.push(e.target.sketchCoords_.pop());\n\n    if (draw.drawend) return draw.drawend(e);\n\n    typeof draw.contextMenu === 'function' && setTimeout(draw.contextMenu, 400);\n  })\n\n  // Assign draw as current interaction to mapview.\n  draw.mapview.interaction = draw\n  \n  // Add OL interaction to mapview.Map\n  draw.mapview.Map.addInteraction(draw.interaction)\n\n  // Set snapSource.\n  draw.mapview.snapSource(draw)\n\n  typeof draw.contextMenu === 'function' && draw.mapview.Map.getTargetElement().addEventListener('contextmenu', draw.contextMenu)\n \n  function getFeature() {\n  \n    // Get OL feature from draw.Layer source.\n    const features = draw.Layer.getSource().getFeatures()\n    \n    // Return feature as geojson.\n    return JSON.parse(\n      draw.format.writeFeature(\n        features[0],\n        { \n          dataProjection: 'EPSG:' + draw.srid,\n          featureProjection: 'EPSG:' + draw.mapview.srid\n        })\n    )\n  }\n  \n  // Finish initeraction.\n  function finish(feature) {\n\n    // Remove interaction as current from mapview.\n    delete draw.mapview.interaction\n  \n    // Execute callback if defined as function.\n    typeof draw.callback === 'function' && draw.callback(feature)\n  \n    // Remove popup from mapview.\n    draw.mapview.popup(null)\n  \n    // Remove context menu from mapview.\n    typeof draw.contextMenu === 'function' && draw.mapview.Map.getTargetElement().removeEventListener('contextmenu', draw.contextMenu)\n\n    // Remove snap source reference.\n    draw.mapview.snapSource(null)\n  \n    // Remove interaction from OL Map.\n    draw.mapview.Map.removeInteraction(draw.interaction)\n  \n    // Remove draw layer from mapview.\n    draw.mapview.Map.removeLayer(draw.Layer)\n  \n    // Clear draw layer source.\n    draw.Layer.getSource().clear()\n  \n    // Reset the cursor style.\n    draw.mapview.Map.getTargetElement().style.cursor = 'default'\n  }\n\n}", "export default function(params){\n\n  const mapview = this\n\n  mapview.interaction?.finish()\n\n  const modify = Object.assign({\n\n    type: 'modify',\n\n    finish,\n  \n    format: new ol.format.GeoJSON(),\n\n    Source: new ol.source.Vector(),\n  \n    vertices: [],\n\n    srid: mapview.srid,\n\n    contextMenu: mapp.ui?.elements.contextMenu.modify.bind(mapview),\n  \n    getFeature,\n\n    Style: [\n      new ol.style.Style({\n        image: new ol.style.Circle({\n          stroke: new ol.style.Stroke({\n            color: '#3399CC',\n            width: 1.25\n          }),\n          radius: 5\n        }),\n        stroke: new ol.style.Stroke({\n          color: '#3399CC',\n          width: 1.25\n        })\n      }),\n      new ol.style.Style({\n        image: new ol.style.Circle({\n          radius: 5,\n          fill: new ol.style.Fill({\n            color: '#eee',\n          }),\n          stroke: new ol.style.Stroke({\n            color: '#3399CC',\n            width: 1.25\n          })\n        }),\n        geometry: mapp.utils.verticeGeoms\n      })\n    ]\n\n  }, params)\n\n  mapview.Map.getTargetElement().style.cursor = 'crosshair'\n\n  modify.Feature && modify.Source.addFeature(modify.Feature)\n\n  modify.Layer = new ol.layer.Vector({\n    source: modify.Source,\n    zIndex: 9999,\n    style: modify.Style,\n  })\n   \n  mapview.Map.addLayer(modify.Layer)\n   \n  modify.interaction = new ol.interaction.Modify({\n    source: modify.Source,\n    deleteCondition: e => {\n\n      if (e.type === 'singleclick') {\n\n        const geom = modify.Feature.getGeometry()\n\n        const geomType = geom.getType()\n\n        if (geomType === 'Point') return;\n\n        const coords = geom.getCoordinates()\n\n        // Return on point or line with 2 vertices.\n        if (geomType === 'LineString' && coords.length < 3) return;\n\n        // Return on polygon with less than 3 vertices.\n        if (coords[0].length <= 4) return;\n     \n        // Set popup to remove vertex.\n        mapview.popup({\n          coords: modify.Feature.getGeometry().getClosestPoint(e.coordinate),\n          content: mapp.utils.html.node`<ul>\n            <li\n              onclick=${() => {\n              modify.interaction.removePoint()\n              modify.vertices.push(modify.Feature.getGeometry().getClosestPoint(e.coordinate))\n            }}>${mapp.dictionary.delete_vertex}`\n        })\n      }\n    }\n  })\n\n  // Will clear remove vertex popup.\n  modify.interaction.on('modifystart', e => {\n    mapview.popup(null)\n  })\n  \n  modify.interaction.on('modifyend', e => {\n\n    modify.vertices.push(e.mapBrowserEvent.coordinate);\n\n    // Execute custom modifyend method.\n    if (modify.modifyend) return modify.modifyend(e, modify);\n\n    typeof modify.contextMenu === 'function' && setTimeout(modify.contextMenu, 400)\n  })\n\n  // Set draw interaction on mapview\n  mapview.interaction = modify\n  \n  mapview.Map.addInteraction(modify.interaction)\n\n  mapview.snapSource(modify)\n \n  function getFeature() {\n     \n    return JSON.parse(\n      modify.format.writeFeature(\n        modify.Feature,\n        { \n          dataProjection: 'EPSG:' + modify.srid,\n          featureProjection: 'EPSG:' + mapview.srid\n        })\n    )\n  }\n  \n  function finish(feature) {\n\n    delete mapview.interaction\n  \n    modify.callback && modify.callback(feature)\n  \n    mapview.popup(null)\n\n    mapview.snapSource(null)\n    \n    mapview.Map.removeInteraction(modify.interaction)\n  \n    mapview.Map.removeLayer(modify.Layer)\n  \n    modify.Source.clear()\n  \n    mapview.Map.getTargetElement().style.cursor = 'default'\n  }\n\n}", "export default function(params){\n\n  const mapview = this\n\n  mapview.interaction?.finish()\n\n  const zoom = {\n\n    finish: finish,\n\n    Layer: new ol.layer.Vector({\n      source: new ol.source.Vector()\n    })\n  }\n\n  mapview.interaction = zoom\n\n  zoom.callback = params.callback\n\n  zoom.Layer.getSource().clear()\n\n  mapview.Map.addLayer(zoom.Layer);\n\n  mapview.Map.getTargetElement().style.cursor = 'zoom-in';\n\n  zoom.interaction = new ol.interaction.Draw({\n    source: zoom.Layer.getSource(),\n    type: 'Circle',\n    geometryFunction: ol.interaction.Draw.createBox(),\n    style: new ol.style.Style({\n      stroke: new ol.style.Stroke({\n        color: '#ddd',\n        width: 1\n      }),\n      fill: new ol.style.Stroke({\n        color: '#fff9'\n      })\n    })\n  })\n\n  zoom.interaction.on('drawend', e => {\n\n    mapview.fitView(e.feature.getGeometry().getExtent())\n\n    finish()\n  })\n\n  mapview.Map.addInteraction(zoom.interaction)\n\n  function finish() {\n\n    delete mapview.interaction\n\n    if (zoom.callback) {\n      zoom.callback()\n      delete zoom.callback\n    }\n\n    mapview.Map.getTargetElement().style.cursor = 'auto';\n\n    mapview.Map.removeInteraction(zoom.interaction)\n\n    mapview.Map.removeLayer(zoom.Layer)\n\n    zoom.Layer.getSource().clear()\n  }\n}", "import addLayer from './addLayer.mjs'\n\nimport fitView from './fitView.mjs'\n\nimport getBounds from './getBounds.mjs'\n\nimport geoJSON from './geoJSON.mjs'\n\nimport infotip from './infotip.mjs'\n\nimport locate from './locate.mjs'\n\nimport popup from './popup.mjs'\n\nimport snapSource from './snapSource.mjs'\n\nimport _highlight from './interactions/highlight.mjs'\n\nimport _draw from './interactions/draw.mjs'\n\nimport _modify from './interactions/modify.mjs'\n\nimport _zoom from './interactions/zoom.mjs'\n\n\nexport default (mapview) => {\n\n  Object.assign(mapview, {\n    srid: mapview.locale.srid || '3857',\n    addLayer,\n    fitView,\n    geoJSON,\n    getBounds,\n    infotip,\n    locate,\n    metrics: {\n      distance: (geometry) => ol.sphere.getLength(\n        new ol.geom.LineString([geometry.getInteriorPoint().getCoordinates(), mapview.position])),\n      area: (geometry) => ol.sphere.getArea(geometry),\n      length: (geometry) => ol.sphere.getLength(geometry),\n    },    \n    popup,\n    snapSource,\n    layers: {},\n    locations: {},\n    interactions: {\n      highlight: _highlight.bind(mapview),\n      draw: _draw.bind(mapview),\n      modify: _modify.bind(mapview),\n      zoom: _zoom.bind(mapview),\n    }\n  })\n\n  // Get the initialZoom for the mapview.\n  const initialZoom = mapp.hooks?.current?.z\n    || mapview.locale.view?.z\n    || mapview.locale.minZoom\n    || 0\n\n  // Get the initialCenter for the mapview.\n  const initialCenter = ol.proj.fromLonLat([\n    parseFloat(mapp.hooks?.current?.lng\n      || mapview.locale.view?.lng\n      || 0),\n    parseFloat(mapp.hooks?.current?.lat\n      || mapview.locale.view?.lat\n      || 0),\n  ])\n\n  // WARN!\n  mapview.locale.bounds && console\n    .warn('locale.bounds have been renamed to locale.extent')\n\n  // Get the mapview extent from the locale.\n  const extent = mapview.locale.extent && ol.proj.transformExtent(\n    [\n      parseFloat(mapview.locale.extent.west || -180),\n      parseFloat(mapview.locale.extent.south || -90),\n      parseFloat(mapview.locale.extent.east || 180),\n      parseFloat(mapview.locale.extent.north || 90),\n    ],\n    `EPSG:4326`,\n    `EPSG:${mapview.srid}`)\n\n  // Map\n  mapview.Map = new ol.Map({\n    target: mapview.target,\n    interactions: ol.interaction.defaults.defaults({ \n      mouseWheelZoom: mapview.scrollWheelZoom || false,\n      pinchRotate: mapview.pinchRotate && {\n        threshold: 3\n      } || false\n    }),\n    moveTolerance: 5,\n    controls: mapview.controls || [], //[new ol.control.Zoom()]\n    view: new ol.View({ \n      projection: `EPSG:${mapview.srid}`,\n      zoom: initialZoom,\n      minZoom: mapview.locale.minZoom,\n      maxZoom: mapview.locale.maxZoom,\n      center: initialCenter,\n      extent: extent\n    })\n  })\n\n  // let resizeObserverTimeout\n\n  // Update the Map size when the target element changes size.\n  // new ResizeObserver(() => {\n  //   resizeObserverTimeout && clearTimeout(resizeObserverTimeout)\n  //   resizeObserverTimeout = setTimeout(()=>{\n  //     mapview.Map.updateSize()\n  //   }, 1000)\n  // }).observe(mapview.Map.getTargetElement())\n\n  // WARN!\n  mapview.locale.maskBounds && console\n    .warn('locale.maskBounds is set as mask:true in locale.extent')\n  \n  // Extent mask\n  if (mapview.locale.extent?.mask) {\n\n    // Set world extent\n    const world = [\n      [180, 90],\n      [180, -90],\n      [-180, -90],\n      [-180, 90],\n      [180, 90],\n    ]\n\n    // Set locale extent\n    const extent = [\n      [mapview.locale.extent.east, mapview.locale.extent.north],\n      [mapview.locale.extent.east, mapview.locale.extent.south],\n      [mapview.locale.extent.west, mapview.locale.extent.south],\n      [mapview.locale.extent.west, mapview.locale.extent.north],\n      [mapview.locale.extent.east, mapview.locale.extent.north],\n    ]\n\n    // Create a maskFeature from the word and locale extent.\n    const maskFeature = new ol.Feature({\n      geometry: new ol.geom\n\n        // Use world and locale extent as polygon rings.\n        // The second ring will be subtracted.\n        .Polygon([world, extent])\n        .transform(`EPSG:4326`, `EPSG:${mapview.srid}`)\n    })\n  \n    // Add masklayer with the maskFeature\n    // and infinite zIndex to mapview.Map\n    mapview.Map.addLayer(new ol.layer.Vector({\n      source: new ol.source.Vector({\n        features: [maskFeature]\n      }),\n      style: new ol.style.Style({\n        fill: new ol.style.Fill({\n          color: '#00000044'\n        })\n      }),\n      zIndex: Infinity\n    }))\n  }\n\n  // Scalebar\n  mapview.scalebar && mapview.Map.addControl(new ol.control.ScaleLine({\n    units: mapview.scalebar\n  }))\n\n  // Attribution\n  if (mapview.attribution) {\n\n    if (typeof mapview.attribution !== 'object') {\n      mapview.attribution = {}\n    }\n\n    mapview.attribution.target = mapview.attribution.target\n      || mapview.Map.getTargetElement()\n        .appendChild(mapp.utils.html.node`\n          <div class=\"attribution-links\">`)\n\n    mapview.attribution.check = () => {\n\n      const o = Object.assign({}, mapview.attribution.links || {})\n\n      // Iterate through layers to check whether attribution should be displayed.\n      Object.values(mapview.layers).forEach(layer => {\n        layer.display && layer.attribution && Object.assign(\n          o, layer.attribution)\n      })\n\n      // Render the layer attribution links into the placeholder.\n      mapp.utils.render(mapview.attribution.target,\n        mapp.utils.html`${Object.entries(o)\n          .map(entry => mapp.utils.html`\n              <a target=\"_blank\" href=\"${entry[1]}\">${entry[0]}`)}`)\n\n    }\n  }\n\n  // Events\n\n  // pointermove\n  mapview.Map.on('pointermove', e => {\n\n    // The geographic coordinate.\n    mapview.position = e.coordinate\n\n    // The pixel coordinate.\n    mapview.pointerLocation = {\n      x: e.originalEvent.clientX,\n      y: e.originalEvent.clientY\n    }\n  })\n\n  // mouseout\n  mapview.Map.getTargetElement().addEventListener('mouseout', () => {\n\n    mapview.infotip(null)\n\n    // Set position on and pointerLocation to null.\n    mapview.position = null\n    mapview.pointerLocation = {\n      x: null,\n      y: null\n    }\n  })\n\n  // changeEnd\n  mapview.Map.getTargetElement().addEventListener('changeEnd', () => {\n\n    // Update URL params if enabled on mapview\n    if (!mapview.hooks) return;\n\n    // Get center from Map.View\n    const center = ol.proj.transform(\n      mapview.Map.getView().getCenter(),\n      `EPSG:${mapview.srid}`,\n      `EPSG:4326`)\n\n    // Set lat, lng, z URL params.\n    mapp.hooks.set({\n      lat: Math.round((center[1] + Number.EPSILON) * 100000) / 100000,\n      lng: Math.round((center[0] + Number.EPSILON) * 100000) / 100000,\n      z: Math.round((mapview.Map.getView().getZoom() + Number.EPSILON) * 100) / 100\n    })\n  })\n\n  // Timer to debounce changeEnd event.\n  let changeEndTimer\n\n  // moveend to call changeEnd event.\n  mapview.Map.on('moveend', ()=>{\n    clearTimeout(changeEndTimer)\n\n    changeEndTimer = setTimeout(()=>{\n      mapview.Map.getTargetElement().dispatchEvent(new CustomEvent('changeEnd'))\n    }, 500)\n  })\n  \n  return mapview\n}", "import utils from './utils/_utils.mjs'\n\nimport hooks from './hooks.mjs'\n\nimport dictionaries from './dictionaries/_dictionaries.mjs'\n\nimport layer from './layer/_layer.mjs'\n\nimport location from './location/_location.mjs'\n\nimport Mapview from './mapview/_mapview.mjs'\n\nhooks.parse()\n\nconst mapp = {\n  version: '4.\u03B2',\n  hash: '314ae6f8523435698ac61f1e701508438fcefa8b',\n  language: hooks.current.language || 'en',\n  dictionaries,\n  dictionary: new Proxy({}, {\n    get: function(target, key, receiver){\n  \n      if (mapp.dictionaries[mapp.language][key]) {\n        return mapp.dictionaries[mapp.language][key]\n      }\n  \n      return mapp.dictionaries.en[key]\n  \n    }}),\n  hooks,\n  layer,\n  location,\n  Mapview,\n  plugins: {},\n  utils,\n}\n\nwindow.mapp = mapp\n\nexport default mapp"],
  "mappings": "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",
  "names": []
}
